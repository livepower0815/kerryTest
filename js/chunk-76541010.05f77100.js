(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-76541010"],{"2fdb":function(t,e,a){"use strict";var i=a("5ca1"),n=a("d2c8"),s="includes";i(i.P+i.F*a("5147")(s),"String",{includes:function(t){return!!~n(this,t,s).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"344c":function(t,e,a){"use strict";var i=a("f029"),n=a.n(i);n.a},5147:function(t,e,a){var i=a("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(a){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},6762:function(t,e,a){"use strict";var i=a("5ca1"),n=a("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"881e":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row my-4"},[a("div",{staticClass:"col-12"},[a("form",{staticClass:"form"},[a("div",{staticClass:"input-group input-lg"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",name:"keyword",id:"keyword",placeholder:"輸入姓名、身分證或保單號碼進行搜尋..."},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-icon",attrs:{type:"submit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.doSearch()}}},[a("i",{staticClass:"icon-search i-24"})])])])])]),a("div",{staticClass:"row row-tables newTable"},[a("div",{staticClass:"col-table pr-0"},[a("h5",[t._v("可選擇的客戶名單")]),a("table",{staticClass:"table datatable insurance-green",attrs:{id:"customer-list"}},[a("thead",[a("tr",[a("th",{attrs:{width:Math.floor(344*.28)+"px"},on:{click:function(e){t.sortArray("unselected","name")}}},[t._v("姓名")]),a("th",{attrs:{width:Math.floor(103.2)+"px"},on:{click:function(e){t.sortArray("unselected","identity")}}},[t._v("身分證")]),a("th",{attrs:{width:Math.floor(86)+"px"},on:{click:function(e){t.sortArray("unselected","birthday")}}},[t._v("生日")]),a("th")])]),a("tbody",t._l(t.families,function(e,i){return a("tr",{key:"familiy-item-"+i},[a("td",{attrs:{width:Math.floor(344*.28)+"px"}},[t._v(t._s(e.name))]),a("td",{attrs:{width:Math.floor(103.2)+"px"}},[t._v(t._s(e.identity))]),a("td",{attrs:{width:Math.floor(86)+"px"}},[t._v(t._s(t._f("dateFormat")(e.birthday)))]),a("td",[a("a",{staticClass:"text-orange",on:{click:function(e){t.addGroup(i)}}},[a("i",{staticClass:"icon-add_new i-20"})])])])}))])]),t._m(0),a("div",{staticClass:"col-table "},[a("h5",[t._v("選擇加入 "),a("a",{staticClass:"link text-underline"},[t._v(t._s(t.customer.name))]),t._v(" 家戶的名單")]),a("table",{staticClass:"table datatable insurance-green",attrs:{id:"new-group-list"}},[a("thead",[a("tr",[a("th",{attrs:{width:Math.floor(344*.28)+"px"},on:{click:function(e){t.sortArray("selected","name")}}},[t._v("姓名")]),a("th",{attrs:{width:Math.floor(103.2)+"px"},on:{click:function(e){t.sortArray("selected","identity")}}},[t._v("身分證")]),a("th",{attrs:{width:Math.floor(86)+"px"},on:{click:function(e){t.sortArray("selected","birthday")}}},[t._v("生日")]),a("th")])]),a("tbody",t._l(t.selectedFamily,function(e,i){return a("tr",{key:"familiy-item-"+i},[a("td",{attrs:{width:Math.floor(344*.28)+"px"}},[t._v(t._s(e.name))]),a("td",{attrs:{width:Math.floor(103.2)+"px"}},[t._v(t._s(e.identity))]),a("td",{attrs:{width:Math.floor(86)+"px"}},[t._v(t._s(t._f("dateFormat")(e.birthday)))]),a("td",[a("a",{staticClass:"text-red",on:{click:function(e){t.removeGroup(i)}}},[a("i",{staticClass:"icon-trashcan i-20"})])])])}))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"actions text-right mt-4"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("取消加入")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.$emit("submit",t.selectedFamily)}}},[t._v("加入此家戶")])])])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"px-2 text-light-green text-center col-split"},[a("i",{staticClass:"icon-forward"})])}],s=(a("7f7f"),a("6762"),a("2fdb"),a("55dd"),[{name:"盧筱曉",gender:0,role:"其他",identity:"A223456789",birthday:"19700201"},{name:"吳法渡",gender:1,role:"其他",identity:"A223456789",birthday:"19860630"},{name:"伊啔徠",gender:1,role:"其他",identity:"A223456789",birthday:"19760630"},{name:"陳名醫",gender:0,role:"其他",identity:"A223456789",birthday:"19800630"},{name:"林家豪",gender:1,role:"其他",identity:"A223456789",birthday:"19820630"},{name:"林志明",gender:1,role:"其他",identity:"A223456789",birthday:"19660630"},{name:"林一明",gender:0,role:"其他",identity:"A223456789",birthday:"19860630"},{name:"林名醫",gender:1,role:"其他",identity:"A223456789",birthday:"19770630"},{name:"王家豪",gender:1,role:"其他",identity:"A223456789",birthday:"19820630"},{name:"王志明",gender:1,role:"其他",identity:"A223456789",birthday:"19660630"},{name:"王一明",gender:1,role:"其他",identity:"A223456789",birthday:"19860630"},{name:"王名醫",gender:1,role:"其他",identity:"A223456789",birthday:"19770630"}]),r={name:"AddFamilyModal",props:{open:{type:Boolean,default:!1},customer:{type:Object,default:function(){return{name:""}}}},watch:{open:"modalChange"},data:function(){return{keyword:"",customerTable:null,selectedTable:null,selectedFamily:[],families:s,unselectedSort:!0}},methods:{addGroup:function(t){this.selectedFamily.push(this.families.splice(t,1)[0]),this.sortArray()},removeGroup:function(t){this.families.push(this.selectedFamily.splice(t,1)[0]),this.sortArray()},sortArray:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"name";"unselected"===t?this.unselectedSort&&this.unselectedItem===e?(this.unselectedSort=!this.unselectedSort,this.families=this.families.sort(function(t,a){return a[e]>=t[e]?1:-1})):(this.unselectedItem=e,this.unselectedSort=!0,this.families=this.families.sort(function(t,a){return t[e]>=a[e]?1:-1})):"selected"===t?this.selectedSort&&this.selectedItem===e?(this.selectedSort=!this.selectedSort,this.selectedFamily=this.selectedFamily.sort(function(t,a){return a[e]>=t[e]?1:-1})):(this.selectedItem=e,this.selectedSort=!0,this.selectedFamily=this.selectedFamily.sort(function(t,a){return t[e]>=a[e]?1:-1})):(this.families=this.families.sort(function(t,a){return t[e]>=a[e]?1:-1}),this.selectedFamily=this.selectedFamily.sort(function(t,a){return t[e]>=a[e]?1:-1}))},refreshData:function(){this.families=this.filterOutById(this.custsOfAgnt,this.custsOfGrp),this.selectedFamily=this.custsOfGrp,this.sortArray()},doSearch:function(){var t=this;if(""!=this.keyword.trim()){var e=this.custsOfAgnt.filter(function(e){return e.name.includes(t.keyword)||e.identity.includes(t.keyword)});this.families=this.filterOutById(e,this.selectedFamily)}else this.families=this.filterOutById(this.custsOfAgnt,this.selectedFamily)},modalChange:function(t){}},mounted:function(){}},l=r,o=(a("344c"),a("2877")),d=Object(o["a"])(l,i,n,!1,null,"1f400ab0",null);d.options.__file="AddFamilyModal.vue";e["a"]=d.exports},cf24:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row my-4"},[a("div",{staticClass:"col-12"},[a("form",{staticClass:"form"},[a("div",{staticClass:"input-group input-lg"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",name:"keyword",id:"keyword",placeholder:"輸入姓名、身分證或保單號碼進行搜尋..."},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-icon",attrs:{type:"submit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.doSearch()}}},[a("i",{staticClass:"icon-search i-24"})])])])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("table",{staticClass:"table insurance-green"},[t._m(0),a("tbody",t._l(t.families,function(e,i){return a("tr",{key:"familiy-item-"+i},[a("td",{staticClass:"d-flex justify-content-between align-items-center px-3"},[a("div",{staticClass:"radio radio-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedFamily,expression:"selectedFamily"}],attrs:{type:"radio",id:"family-"+(i+1)},domProps:{value:i,checked:t._q(t.selectedFamily,i)},on:{change:function(e){t.selectedFamily=i}}}),a("label",{attrs:{for:"family-"+(i+1)}},[t._v(t._s(i+1))])]),a("img",{staticClass:"avatar",attrs:{src:0===e.gender?t.BaseUrl+"assets/common/gender_woman_s.png":1===e.gender?t.BaseUrl+"assets/common/gender_man_s.png":t.BaseUrl+"assets/common/gender_unknow_s.png",srcset:0===e.gender?t.BaseUrl+"assets/common/gender_woman_s@2x.png":1===e.gender?t.BaseUrl+"assets/common/gender_man_s@2x.png":t.BaseUrl+"assets/common/gender_unknow_s@2x.png",width:"20",height:"20"}})]),a("td",[a("a",{staticClass:"link text-underline"},[t._v("\n                      "+t._s(e.name)+"\n                    ")])]),a("td",[t._v(t._s(e.identity))]),a("td",[t._v(t._s(t._f("dateFormat")(e.birthday)))]),a("td",[t._v(t._s(t._f("ageCounter")(e.birthday)))])])}))]),a("div",{staticClass:"actions text-right mt-4"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("取消加入")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.$emit("submit",t.selectedFamily)}}},[t._v("加入此家戶")])])])])])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center",attrs:{width:"120"}},[t._v("#")]),a("th",[t._v("戶長姓名")]),a("th",[t._v("身分證")]),a("th",[t._v("生日")]),a("th",[t._v("歲數")])])])}],s=a("be94"),r=a("2f62"),l=[{name:"王小熊",gender:0,identity:"A223456789",birthday:"19700201"},{name:"陳志明",gender:1,identity:"A223456789",birthday:"19860630"},{name:"陳一明",gender:1,identity:"A223456789",birthday:"19760630"},{name:"陳名醫",gender:0,identity:"A223456789",birthday:"19800630"},{name:"林家豪",gender:1,identity:"A223456789",birthday:"19820630"},{name:"林志明",gender:1,identity:"A223456789",birthday:"19660630"},{name:"林一明",gender:0,identity:"A223456789",birthday:"19860630"},{name:"林名醫",gender:1,identity:"A223456789",birthday:"19770630"},{name:"王家豪",gender:1,identity:"A223456789",birthday:"19820630"},{name:"王志明",gender:1,identity:"A223456789",birthday:"19660630"},{name:"王一明",gender:1,identity:"A223456789",birthday:"19860630"},{name:"王名醫",gender:1,identity:"A223456789",birthday:"19770630"}],o={name:"FamilyModal",props:{open:{type:Boolean,default:!1}},computed:Object(s["a"])({},Object(r["c"])(["BaseUrl"])),data:function(){return{keyword:"",selectedFamily:"",families:l}},methods:{doSearch:function(){}}},d=o,c=a("2877"),m=Object(c["a"])(d,i,n,!1,null,null,null);m.options.__file="FamilyModal.vue";e["a"]=m.exports},d2c8:function(t,e,a){var i=a("aae3"),n=a("be13");t.exports=function(t,e,a){if(i(e))throw TypeError("String#"+a+" doesn't accept regex!");return String(n(t))}},d918:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("customer-info",{attrs:{loading:!1}}),a("tab-header",{attrs:{current:t.currentTab}}),a("div",{staticClass:"tab-content",class:{"section-loading":t.loading_1}},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"tab-pane active show"},[0!=t.familyMemList.length||t.familyEditing?a("div",[t.familyEditing?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3 text-right"},[t.oldFamily.leader?a("a",{staticClass:"btn btn-default btn-sm m-0 mr-2",attrs:{disabled:t.oldFamily.leader&&!t.customer.family.length},on:{click:function(e){t.beforeClearFamily()}}},[t._v("\n                刪除家戶\n              ")]):t._e(),a("a",{staticClass:"btn btn-default btn-sm m-0 mr-2",on:{click:function(e){t.cancelFamilyEdit()}}},[t._v("\n                取消\n              ")]),a("a",{staticClass:"btn btn-primary btn-sm m-0 mr-2",on:{click:function(e){t.submitFamilyEdit()}}},[t._v("\n                儲存\n              ")])])]):a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("a",{staticClass:"btn btn-default btn-sm btn-icon m-0 float-right",on:{click:function(e){t.editFamily()}}},[a("i",{staticClass:"icon-edit"})])])]),a("div",{staticClass:"cards family"},[t._l(t.familyMemList,function(e,i){return a("div",{key:"family-card-"+i,staticClass:"card"},[t.familyEditing&&i>0&&!e.currentCustomer?a("a",{staticClass:"close",on:{click:function(a){t.removeMember(i,e)}}},[a("i",{staticClass:"icon-close"})]):t._e(),e.link?a("h3",[a("a",{staticClass:"link text-underline",on:{click:function(a){t.routeToCustDetail(i,e.personalid)}}},[t._v("\n                  "+t._s(e.name)+"\n                ")])]):a("h3",[t._v(t._s(e.name))]),a("div",{staticClass:"content"},[a("div",{staticClass:"desc role"},[a("avatar",{attrs:{gender:e.sex,size:20}}),t.familyEditing&&i>0?a("span",{staticClass:"text"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.role,expression:"card.role"}],staticClass:"form-control form-control-inline form-short",on:{change:function(a){var i=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(e,"role",a.target.multiple?i:i[0])}}},t._l(t.roleOpt,function(e,i){return a("option",{key:"role-select-"+i},[t._v("\n                        "+t._s(e)+"\n                      ")])}))]):a("span",{staticClass:"text"},[t._v("\n                    "+t._s(t._f("relationFormat")(e.relation))+"\n                  ")])],1)]),a("div",{staticClass:"desc"},[t._v(t._s(e.personalid))]),a("div",{staticClass:"desc"},[a("b",{staticClass:"float-right"},[t._v(t._s(t._f("dataFormat")(e.birthday))+"歲")]),t._v("\n                "+t._s(e.birthday)+"\n              ")])])}),t.familyEditing&&t.customer.family.length?a("div",{staticClass:"card add",on:{click:function(e){t.createFamily()}}},[t._m(0),a("div",{staticClass:"p"},[t._v("新增家戶成員")])]):t._e()],2)]):a("div",{staticClass:"empty-block family bg-white"},[a("h3",[t._v(t._s(t.CustInfo.name)+"尚未屬於任何一個帳戶")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.panelOpen("familyModalOpen")}}},[t._v("\n            加入現有家戶\n          ")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.initFamily()}}},[t._v("\n            成立新的家戶\n          ")])])])])]),a("family-modal",{attrs:{open:t.familyModalOpen},on:{close:function(e){t.panelClose("familyModalOpen")},submit:t.submitFamily}}),a("add-family-modal",{attrs:{open:t.addFamilyModalOpen,customer:t.CustInfo},on:{close:function(e){t.panelClose("addFamilyModalOpen")},submit:t.submitAddFamily}}),a("warning-modal",{attrs:{open:t.warningModalOpen,message:t.warningData[t.currentWarningType].message},on:{close:function(e){t.panelClose("warningModalOpen")},submit:t.warningSubmit}})],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icon"},[a("i",{staticClass:"icon-add_new text-orange i-32"})])}],s=(a("96cf"),a("1da1")),r=(a("28a5"),a("55dd"),a("c5f6"),a("7f7f"),a("be94")),l=(a("a481"),a("2f62")),o=(a("0a63"),a("872c")),d=a("8e44"),c=a("df3a"),m=a("c45c"),u=a("35b6"),y=a("881e"),f=a("cf24"),h=a("91d3"),p=(a("5977"),a("5495"),a("3022"),{info:{lv:3,gender:0,familyLeader:!0,birthday:"19750809",name:"陳怡君",mobile:"0922133647",phone:"02-28223521",fax:"02-28223521",ID:"A223456789",office_phone:"02-28223521",address:["112","台北市","北投區","光明路251號"],office_address:["104","台北市","內湖區","陽光街288號"]},data:{remark:"要被意保險",lineid:"Amy0315",career:"公務員",agency:"總統府",marriage:"已婚",relate:"要被意保險",introducer:"林怡君",email:"Green@tree.com.tw",education:"研究所"},iaa:{mobile:"0922133647",phone:"02-28223521",address:["112","台北市","北投區","光明路251號"],email:"Green@tree.com.tw"},financial:{household_income:"80萬~100萬",personal_income:"80萬~100萬",monthly_invest:10,finance_tool:"股票",houseloan:0,housing:"自宅",vehicle:"機車、汽車"},decline:[1,2,3],family:[{link:1,name:"陳怡君",gender:0,identity:"A223456789",role:"戶長",birthday:"19600809"},{name:"王大進",gender:1,identity:"A223456789",role:"配偶",birthday:"19600809"},{name:"王潔心",gender:0,identity:"A223456789",role:"子女",birthday:"19600809"},{name:"簡沛文",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"},{link:1,name:"陳潔妮",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"},{name:"端木王大進",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"}],record:[{year:94,data:[]},{year:95,data:[]},{year:96,data:[]},{year:97,data:[]},{year:98,data:[{date:"98/12/25",title:"聖誕節送禮",tags:["增員關係","車險預約單","易Call保","贈送媒體"]}]},{year:99,data:[]},{year:100,data:[]},{year:101,data:[]},{year:102,data:[]},{year:103,data:[]},{year:104,data:[]},{year:105,data:[{date:"105/12/25",title:"聖誕節送禮",tags:["增員關係","車險預約單","易Call保","贈送媒體"]},{date:"105/06/08",title:"聖誕節送禮",tags:["增員關係","車險預約單","易Call保","贈送媒體"]}]},{year:106,data:[{date:"106/12/25",title:"",tags:["增員關係","車險預約單","易Call保","贈送媒體"]}]},{year:107,data:[]}],note:"一般市面上的老百姓，家中有新生兒，潛在客戶，一般市面上的老百姓，家中有新生兒，潛在客戶。"}),b={name:"CustomerDetail",mixins:[o["a"]],data:function(){return{loading_1:!0,selectedService:0,currentTab:0,insuranceFilter:0,customer:p,familyMemList:[],familyEditing:!1,oldFamily:{leader:!1,family:[]},roleOpt:["戶長","配偶","子女","其他"],addFamilyModalOpen:!1,familyModalOpen:!1,warningModalOpen:!1,currentDelIndex:0,currentWarningType:"delFamily",warningData:{delFamily:{message:"您是否確認要刪除家戶成員 簡沛文 ，若確定刪除，則簡沛文 需重新歸戶。",submit:"delFamily"},clearFamily:{message:"您是否確認要刪除以 <b></b> 為戶長之家戶，若確定刪除，則原家戶成員皆須重新歸戶。",submit:"clearFamily"},saveFamily:{message:"是否確認要修改 <b>{name}</b> 的家戶關係？",submit:"saveFamily"},becomeLeader:{message:"是否確認要修改 <b></b> 的家戶關係？",submit:"becomeLeader"},confirmDelOther:{message:"您是否確認要刪除此筆主約「(紐約人壽)安心住院醫療保險附約-限額(計劃四)(HR)」？",submit:"clearInsurance"},confirmDelOtherNoSUb:{message:"您是否確認要刪除此筆產險保單",submit:"clearInsurance"}}}},filters:{dataFormat:function(t){if(""===t||"--"===t)return"— —";var e=t.replace(/\/.*/g,""),a=window.moment();return a.year()-1911-e},relationFormat:function(t){switch(console.log(t),t){case"0":return"本人";case"1":return"配偶";case"2":return"子女";case"3":return"父母";case"4":return"其他";case"5":return"孫子女";case"6":return"戶長";default:return t}}},components:{Avatar:c["a"],CustomerInfo:m["a"],TabHeader:u["a"],FamilyModal:f["a"],WarningModal:h["a"],AddFamilyModal:y["a"]},computed:Object(r["a"])({},Object(l["c"])(["BaseUrl","CustInfo"])),methods:Object(r["a"])({},Object(l["b"])(["setPageLock","updateCustID","updateCustFamilyLeader"]),{createFamily:function(){this.panelOpen("addFamilyModalOpen")},selectFamily:function(){this.panelOpen("addFamilyModalOpen")},removeMember:function(t,e){this.currentDelIndex=t,this.currentWarningType="delFamily",this.warningData[this.currentWarningType].message='您是否確認要刪除家戶成員 <a class="link text-underline">'.concat(e.name,'<a/> ，若確定刪除，則<a class="link text-underline">').concat(e.name,"<a/> 需重新歸戶。"),this.panelOpen("warningModalOpen")},warningSubmit:function(){var t=this.warningData[this.currentWarningType].submit;this[t](),this.panelClose("warningModalOpen")},confirmClearInsurance:function(t,e){e?(this.warningData.confirmDelOther.message="您是否確認要刪除此筆主約「<b>".concat(t.name,"</b> 」？"),this.currentWarningType="confirmDelOther"):this.currentWarningType="confirmDelOtherNoSUb",this.panelOpen("warningModalOpen")},delFamily:function(){this.customer.family.splice(this.currentDelIndex,1)},initFamily:function(){this.recordOrResetFamily(),this.familyEditing=!0;var t=[{link:1,name:this.customer.info.name,gender:0,identity:"A223456789",role:"戶長",birthday:"19600809",currentCustomer:!0}];this.customer.info.familyLeader=!0,this.customer.family=t},submitAddFamily:function(t){this.panelClose("addFamilyModalOpen")},submitFamily:function(t){this.recordOrResetFamily(),this.familyEditing=!0;var e=[{link:1,name:"陳怡君",gender:0,identity:"A223456789",role:"戶長",birthday:"19600809"},{name:"王大進",gender:1,identity:"A223456789",role:"配偶",birthday:"19600809"},{name:"王潔心",gender:0,identity:"A223456789",role:"子女",birthday:"19600809"},{name:"簡沛文",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"},{link:1,name:"陳潔妮",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"},{name:"端木王大進",gender:-1,identity:"A223456789",role:"其他",birthday:"19600809"}];e.push({link:1,name:this.customer.info.name,gender:0,identity:"A223456789",role:"其他",birthday:"19600809",currentCustomer:!0}),this.customer.info.familyLeader=!1,this.customer.family=e,this.panelClose("familyModalOpen")},beforeClearFamily:function(){this.currentWarningType="clearFamily",this.warningData.clearFamily.message="您是否確認要刪除以 <b>".concat(p.info.name,"</b> 為戶長之家戶，若確定刪除，則原家戶成員皆須重新歸戶。"),this.panelOpen("warningModalOpen")},clearFamily:function(){this.recordOrResetFamily(),this.familyEditing=!0,this.customer.family=[],this.customer.info.familyLeader=!1,this.panelClose("warningModalOpen")},recordOrResetFamily:function(t){t?(this.customer.info.familyLeader=this.oldFamily.leader,this.customer.family=this.oldFamily.family):this.oldFamily={leader:window._.clone(this.customer.info.familyLeader),family:window._.clone(this.customer.family)}},cancelFamilyEdit:function(){this.recordOrResetFamily(!0),this.familyEditing=!1},becomeLeader:function(){this.panelClose("warningModalOpen"),this.familyEditing=!1},saveFamily:function(){this.panelClose("warningModalOpen"),this.familyEditing=!1},submitFamilyEdit:function(){!this.oldFamily.leader&&this.customer.info.familyLeader?(this.warningData.becomeLeader.message="是否確認要修改<b>".concat(this.customer.info.name,"</b> 的家戶關係？"),this.currentWarningType="becomeLeader"):(this.warningData.saveFamily.message="是否確認要修改<b>".concat(this.customer.info.name,"</b> 的家戶關係？"),this.currentWarningType="saveFamily"),this.panelOpen("warningModalOpen")},editFamily:function(){this.recordOrResetFamily(),this.familyEditing=!0},routeToCustDetail:function(t,e){this.updateCustID(e),localStorage.CustID=e,this.$router.push({path:"/detail/CustID/tab/1"})},initCustomerDetail2:function(){var t=this;this.loading_1=!0,Object(d["C"])(this.$store.state.userInfo.id,this.CustInfo.ID).then(function(e){if(e.header&&"200"===e.header.status&&e.body.familymembers){e.body.familymembers.length>0&&e.body.familymembers[0].householderid==t.CustInfo.ID&&(t.updateCustFamilyLeader=!0);var a=e.body.familymembers.map(function(t,e){return{link:e+1,birthday:t.birthday,guid:t.guid,householderid:t.householderid,name:t.name,personalid:t.personalid,relation:t.relation,sex:Number(t.sex)||0}});a.sort(function(t,e){return t.relation<e.relation?-1:1}),t.familyMemList=a}else t.familyMemList=[];t.loading_1=!1})}}),beforeMount:function(){var t=this.$route.name.split(/-/g).reverse();this.currentTab=Number(t[0])},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.initCustomerDetail2();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},g=b,v=a("2877"),_=Object(v["a"])(g,i,n,!1,null,null,null);_.options.__file="CustomerDetail2.vue";e["default"]=_.exports},f029:function(t,e,a){}}]);
//# sourceMappingURL=chunk-76541010.05f77100.js.map