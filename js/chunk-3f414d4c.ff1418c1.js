(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f414d4c"],{"04a7":function(t,e,s){"use strict";s("ac4d"),s("8a81"),s("ac6a");e["a"]={data:function(){return{}},created:function(){window.imeServer="https://mi.cathaylife.com.tw/wf/",window.WebRootPath="./".concat(this.$conf.System,"/js/")},mounted:function(){this.registerHanlink()},methods:{registerHanlink:function(){var t=document.getElementsByClassName("ime-window");if(t.length>0){var e=!0,s=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(e=(o=i.next()).done);e=!0){var n=o.value;n.parentNode.removeChild(n)}}catch(l){s=!0,a=l}finally{try{e||null==i.return||i.return()}finally{if(s)throw a}}}var r=document.createElement("script");r.setAttribute("lang","text/javascript"),r.setAttribute("src",window.WebRootPath+"hanlinks/wf_links.min.js"),document.getElementsByTagName("head").item(0).appendChild(r)}}}},1169:function(t,e,s){var a=s("2d95");t.exports=Array.isArray||function(t){return"Array"==a(t)}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"35b6":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"tab-header"},[s("div",{staticClass:"container-fluid"},[s("ul",{staticClass:"nav nav-tabs",attrs:{role:"tablist"}},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":1===t.current},attrs:{to:"/detail/origin/tab/1"}},[t._v("\n          基本資料\n        ")])],1),""!==t.CustInfo.ID?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":2===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/2"}},[t._v("\n          家戶關係\n        ")])],1):s("li",{staticClass:"nav-item"},[s("p",{staticClass:"nav-link disabled"},[t._v("\n          家戶關係\n        ")])]),""!==t.CustInfo.ID?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":3===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/3"}},[t._v("\n          紀錄簿\n        ")])],1):s("li",{staticClass:"nav-item"},[s("p",{staticClass:"nav-link disabled"},[t._v("\n          紀錄簿\n        ")])]),""!==t.CustInfo.ID?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":4===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/4"}},[t._v("\n          保單資訊\n        ")])],1):s("li",{staticClass:"nav-item"},[s("p",{staticClass:"nav-link disabled"},[t._v("\n          保單資訊\n        ")])]),""!==t.CustInfo.ID?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":5===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/5"}},[t._v("\n          服務歷程\n        ")])],1):s("li",{staticClass:"nav-item"},[s("p",{staticClass:"nav-link disabled"},[t._v("\n          服務歷程\n        ")])]),""!==t.CustInfo.ID?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":6===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/6"}},[t._v("\n          申辦進度\n        ")])],1):s("li",{staticClass:"nav-item"},[s("p",{staticClass:"nav-link disabled"},[t._v("\n          申辦進度\n        ")])]),""!==t.CustInfo.ID&&t.HasHousingLoans?s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",class:{"active show":7===t.current},attrs:{to:"/detail/"+t.customerId+"/tab/7"}},[t._v("\n          房貸資訊\n        ")])],1):t._e()])])])},o=[],i=s("be94"),n=(s("c5f6"),s("2f62")),r={name:"TabHeader",props:{customerId:{type:Number,default:1},current:{type:Number,default:1}},computed:Object(i["a"])({},Object(n["c"])(["CustInfo","HasHousingLoans"]))},l=r,c=(s("9544"),s("2877")),f=Object(c["a"])(l,a,o,!1,null,null,null);f.options.__file="TabHeader.vue";e["a"]=f.exports},"37c8":function(t,e,s){e.f=s("2b4c")},"3a72":function(t,e,s){var a=s("7726"),o=s("8378"),i=s("2d00"),n=s("37c8"),r=s("86cc").f;t.exports=function(t){var e=o.Symbol||(o.Symbol=i?{}:a.Symbol||{});"_"==t.charAt(0)||t in e||r(e,t,{value:n.f(t)})}},"3a74":function(t,e,s){},"3d14":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.lv>4?s("img",{staticClass:"lv",attrs:{src:7===t.lv?t.BaseUrl+"assets/label_diamond.png":6===t.lv?t.BaseUrl+"assets/label_platinum.png":t.BaseUrl+"assets/label_gold.png",srcset:7===t.lv?t.BaseUrl+"assets/label_diamond@2x.png":6===t.lv?t.BaseUrl+"assets/label_platinum@2x.png":t.BaseUrl+"assets/label_gold@2x.png",width:t.size}}):t._e()},o=[],i=(s("c5f6"),s("be94")),n=s("2f62"),r={name:"Level",computed:Object(i["a"])({},Object(n["c"])(["BaseUrl"])),props:{lv:{type:Number,default:0},size:{type:Number,default:30}}},l=r,c=s("2877"),f=Object(c["a"])(l,a,o,!1,null,null,null);f.options.__file="Level.vue";e["a"]=f.exports},5495:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal warning fade",class:{"is-open":t.open}},[s("div",{staticClass:"modal-dialog modal-sm"},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body"},[s("div",{staticClass:"warning"},[s("img",{attrs:{width:"48",src:t.BaseUrl+"assets/common/warning.png",srcset:t.BaseUrl+"assets/common/warning@2x.png"}}),s("span",{staticClass:"text"},[t._v("您確定要刪除「"+t._s(t.inputData.name||t.inputData.favorite_name)+"」嗎？")])]),s("div",{staticClass:"action text-right"},[s("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("取消")]),s("a",{staticClass:"btn btn-primary",on:{click:function(e){t.$emit("confirm")}}},[t._v("確定")])])])])])])},o=[],i=s("be94"),n=s("2f62"),r=(s("8e44"),{name:"ConfirmDelete",computed:Object(i["a"])({},Object(n["c"])(["BaseUrl","CustInfo"])),props:{open:{type:Boolean,default:!1},inputData:{type:[Object,String],default:function(){return{}}}},methods:{}}),l=r,c=s("2877"),f=Object(c["a"])(l,a,o,!1,null,null,null);f.options.__file="ConfirmDelete.vue";e["a"]=f.exports},73334:function(t,e,s){"use strict";var a=s("0d58"),o=s("2621"),i=s("52a7"),n=s("4bf8"),r=s("626a"),l=Object.assign;t.exports=!l||s("79e5")(function(){var t={},e={},s=Symbol(),a="abcdefghijklmnopqrst";return t[s]=7,a.split("").forEach(function(t){e[t]=t}),7!=l({},t)[s]||Object.keys(l({},e)).join("")!=a})?function(t,e){var s=n(t),l=arguments.length,c=1,f=o.f,d=i.f;while(l>c){var m,u=r(arguments[c++]),p=f?a(u).concat(f(u)):a(u),v=p.length,h=0;while(v>h)d.call(u,m=p[h++])&&(s[m]=u[m])}return s}:l},"7bbc":function(t,e,s){var a=s("6821"),o=s("9093").f,i={}.toString,n="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(t){try{return o(t)}catch(e){return n.slice()}};t.exports.f=function(t){return n&&"[object Window]"==i.call(t)?r(t):o(a(t))}},"8a81":function(t,e,s){"use strict";var a=s("7726"),o=s("69a8"),i=s("9e1e"),n=s("5ca1"),r=s("2aba"),l=s("67ab").KEY,c=s("79e5"),f=s("5537"),d=s("7f20"),m=s("ca5a"),u=s("2b4c"),p=s("37c8"),v=s("3a72"),h=s("d4c0"),_=s("1169"),b=s("cb7c"),g=s("d3f4"),C=s("6821"),y=s("6a99"),w=s("4630"),I=s("2aeb"),x=s("7bbc"),O=s("11e9"),A=s("86cc"),k=s("0d58"),D=O.f,N=A.f,$=x.f,j=a.Symbol,S=a.JSON,P=S&&S.stringify,E="prototype",B=u("_hidden"),L=u("toPrimitive"),F={}.propertyIsEnumerable,U=f("symbol-registry"),z=f("symbols"),M=f("op-symbols"),H=Object[E],J="function"==typeof j,T=a.QObject,W=!T||!T[E]||!T[E].findChild,Y=i&&c(function(){return 7!=I(N({},"a",{get:function(){return N(this,"a",{value:7}).a}})).a})?function(t,e,s){var a=D(H,e);a&&delete H[e],N(t,e,s),a&&t!==H&&N(H,e,a)}:N,R=function(t){var e=z[t]=I(j[E]);return e._k=t,e},Z=J&&"symbol"==typeof j.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof j},q=function(t,e,s){return t===H&&q(M,e,s),b(t),e=y(e,!0),b(s),o(z,e)?(s.enumerable?(o(t,B)&&t[B][e]&&(t[B][e]=!1),s=I(s,{enumerable:w(0,!1)})):(o(t,B)||N(t,B,w(1,{})),t[B][e]=!0),Y(t,e,s)):N(t,e,s)},G=function(t,e){b(t);var s,a=h(e=C(e)),o=0,i=a.length;while(i>o)q(t,s=a[o++],e[s]);return t},K=function(t,e){return void 0===e?I(t):G(I(t),e)},Q=function(t){var e=F.call(this,t=y(t,!0));return!(this===H&&o(z,t)&&!o(M,t))&&(!(e||!o(this,t)||!o(z,t)||o(this,B)&&this[B][t])||e)},V=function(t,e){if(t=C(t),e=y(e,!0),t!==H||!o(z,e)||o(M,e)){var s=D(t,e);return!s||!o(z,e)||o(t,B)&&t[B][e]||(s.enumerable=!0),s}},X=function(t){var e,s=$(C(t)),a=[],i=0;while(s.length>i)o(z,e=s[i++])||e==B||e==l||a.push(e);return a},tt=function(t){var e,s=t===H,a=$(s?M:C(t)),i=[],n=0;while(a.length>n)!o(z,e=a[n++])||s&&!o(H,e)||i.push(z[e]);return i};J||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var t=m(arguments.length>0?arguments[0]:void 0),e=function(s){this===H&&e.call(M,s),o(this,B)&&o(this[B],t)&&(this[B][t]=!1),Y(this,t,w(1,s))};return i&&W&&Y(H,t,{configurable:!0,set:e}),R(t)},r(j[E],"toString",function(){return this._k}),O.f=V,A.f=q,s("9093").f=x.f=X,s("52a7").f=Q,s("2621").f=tt,i&&!s("2d00")&&r(H,"propertyIsEnumerable",Q,!0),p.f=function(t){return R(u(t))}),n(n.G+n.W+n.F*!J,{Symbol:j});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),st=0;et.length>st;)u(et[st++]);for(var at=k(u.store),ot=0;at.length>ot;)v(at[ot++]);n(n.S+n.F*!J,"Symbol",{for:function(t){return o(U,t+="")?U[t]:U[t]=j(t)},keyFor:function(t){if(!Z(t))throw TypeError(t+" is not a symbol!");for(var e in U)if(U[e]===t)return e},useSetter:function(){W=!0},useSimple:function(){W=!1}}),n(n.S+n.F*!J,"Object",{create:K,defineProperty:q,defineProperties:G,getOwnPropertyDescriptor:V,getOwnPropertyNames:X,getOwnPropertySymbols:tt}),S&&n(n.S+n.F*(!J||c(function(){var t=j();return"[null]"!=P([t])||"{}"!=P({a:t})||"{}"!=P(Object(t))})),"JSON",{stringify:function(t){var e,s,a=[t],o=1;while(arguments.length>o)a.push(arguments[o++]);if(s=e=a[1],(g(e)||void 0!==t)&&!Z(t))return _(e)||(e=function(t,e){if("function"==typeof s&&(e=s.call(this,t,e)),!Z(e))return e}),a[1]=e,P.apply(S,a)}}),j[E][L]||s("32e9")(j[E],L,j[E].valueOf),d(j,"Symbol"),d(Math,"Math",!0),d(a.JSON,"JSON",!0)},9544:function(t,e,s){"use strict";var a=s("3a74"),o=s.n(a);o.a},ac4d:function(t,e,s){s("3a72")("asyncIterator")},c45c:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container-fluid pt-2"},[s("div",{staticClass:"row",class:{"section-loading":t.isLoading_1}},[s("div",{staticClass:"col-2 text-center"},[s("level",{attrs:{lv:t.CustInfo.lv}}),s("br"),s("avatar",{attrs:{gender:Number(t.CustInfo.gender)}}),s("h3",{staticClass:"mt-0"},[""!==t.CustInfo.birthday?s("small",[s("b",[t._v(t._s(t.CustInfo.age?t.CustInfo.age:"— —")+"歲")])]):s("small",[s("b",[t._v("— —")])])])],1),s("div",{staticClass:"col-10"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label"},[t._v("姓名")]),s("div",{staticClass:"col-9 text d-flex"},[s("div",{staticClass:"name-block"},[t._v(t._s(t.CustInfo.name))]),s("a",{directives:[{name:"show",rawName:"v-show",value:t.CustInfo.name&&t.CustInfo.name.length>10,expression:"CustInfo.name && CustInfo.name.length > 10"}],staticClass:"link text-underline all-name",attrs:{tabindex:"0",id:"user-name","data-toggle":"popover",role:"button","data-content":t.CustInfo.name}},[t._v("\n                看全名\n              ")])])])]),s("div",{staticClass:"col-6"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.CustInfo.wg_name&&""!==t.CustInfo.wg_name,expression:"CustInfo.wg_name && CustInfo.wg_name!==''"}],staticClass:"item row"},[s("div",{staticClass:"col-2 label"},[t._v("原住民名")]),s("div",{staticClass:"col-10 text d-flex"},[s("div",{staticClass:"name-block",staticStyle:{"line-height":"20px"}},[t._v(t._s(t.CustInfo.wg_name))]),s("a",{directives:[{name:"show",rawName:"v-show",value:t.CustInfo.wg_name&&t.CustInfo.wg_name.length>20,expression:"CustInfo.wg_name && CustInfo.wg_name.length > 20"}],staticClass:"link text-underline all-name",attrs:{tabindex:"1",id:"aboriginal-name","data-toggle":"popover",role:"button","data-content":t.CustInfo.wg_name}},[t._v("\n                看全名\n              ")])])])]),s("div",{staticClass:"col-3 text-right action"},[t.custDieStatus||"1"==t.source6||""===this.$store.state.custInfo.ID?s("a",{staticClass:"btn btn-default btn-sm mb-0 mt-1",on:{click:function(e){t.panelOpen("confirmDeleteOpen")}}},[t._v("\n            刪除客戶\n          ")]):t._e(),s("a",{staticClass:"btn btn-default btn-sm btn-icon mb-0 mt-1",on:{click:function(e){t.panelOpen("contactInfoOpen")}}},[s("i",{staticClass:"icon-edit i-18"})])])]),s("div",{staticClass:"row"},[s("div",{staticClass:"col-3"},[s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label"},[t._v("性別")]),s("div",{staticClass:"col-9 text"},[2==t.CustInfo.gender?s("span",[t._v("女")]):1==t.CustInfo.gender?s("span",[t._v("男")]):s("span",[t._v("— —")])])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label pl-0"},[t._v("ID")]),s("div",{staticClass:"col-9 text"},[t._v(t._s(t._f("emptyField")(t.CustInfo.ID)))])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label"},[t._v("生日")]),s("div",{staticClass:"col-9 text"},[t._v(t._s(t._f("dateFormat")(t.CustInfo.birthday)))])])]),s("div",{staticClass:"col-3"},[s("div",{staticClass:"item row"},[s("div",{staticClass:"col-4 label"},[t._v("手機")]),s("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.CustInfo.mobile)))])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-4 label pl-0"},[t._v("住家電話")]),s("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t._f("phoneFormat")(t.CustInfo.phone))))])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-4 label pl-0"},[t._v("公司電話")]),s("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t._f("phoneFormat")(t.CustInfo.office_phone))))])])]),s("div",{staticClass:"col-6"},[s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label pl-0"},[t._v("LINE ID")]),s("div",{staticClass:"col-9 text"},[t._v(t._s(t._f("emptyField")(t.CustInfo.lineid)))])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label"},[t._v("現居地址")]),s("div",{staticClass:"col-9 text"},[t.CustInfo.address[1]||t.CustInfo.address[2]||t.CustInfo.address[3]?s("a",{staticClass:"link text-underline",attrs:{target:"_blank",href:"https://www.google.com/maps/place/"+t.CustInfo.address}},[t._v("\n                "+t._s(t._f("emptyField")(t._f("addressFormat")(t.CustInfo.address)))+"\n              ")]):s("span",[t._v("— —")])])]),s("div",{staticClass:"item row"},[s("div",{staticClass:"col-3 label"},[t._v("公司地址")]),s("div",{staticClass:"col-9 text"},[t.CustInfo.office_address[1]||t.CustInfo.office_address[2]||t.CustInfo.office_address[3]?s("a",{staticClass:"link text-underline",attrs:{target:"_blank",href:"https://www.google.com/maps/place/"+t.CustInfo.office_address}},[t._v("\n                "+t._s(t._f("emptyField")(t._f("addressFormat")(t.CustInfo.office_address)))+"\n              ")]):s("span",[t._v("— —")])])])])])])]),s("contact-info-modal",{attrs:{open:t.contactInfoOpen,inputs:t.CustInfo},on:{submit:t.contactSubmit,close:function(e){t.panelClose("contactInfoOpen")}}}),s("confirm-delete",{attrs:{open:t.confirmDeleteOpen,"input-data":t.CustInfo},on:{close:function(e){t.panelClose("confirmDeleteOpen")},confirm:t.deleteCustomer}})],1)},o=[],i=(s("7f7f"),s("be94")),n=(s("c5f6"),s("2f62")),r=s("872c"),l=s("04a7"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("img",{staticClass:"avatar",attrs:{src:2==t.gender?t.BaseUrl+"assets/common/gender_woman_l.png":1==t.gender?t.BaseUrl+"assets/common/gender_man_l.png":t.BaseUrl+"assets/common/gender_unknow_l.png",srcset:2==t.gender?t.BaseUrl+"assets/common/gender_woman_l@2x.png":1==t.gender?t.BaseUrl+"assets/common/gender_man_l@2x.png":t.BaseUrl+"assets/common/gender_unknow_l@2x.png",width:t.size}})},f=[],d={name:"Avatar",computed:Object(i["a"])({},Object(n["c"])(["BaseUrl"])),props:{gender:{type:Number,default:0},size:{type:Number,default:60}}},m=d,u=s("2877"),p=Object(u["a"])(m,c,f,!1,null,null,null);p.options.__file="Avatar.vue";var v,h=p.exports,_=s("3d14"),b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal fade confirm",class:{"is-open":t.open}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[s("form",{staticClass:"form"},[s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"name"}},[t._v("姓名")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],staticClass:"form-control form-control-inline",attrs:{type:"text",alt:"ch"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"name"}},[t._v("原住民姓名")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.wg_name,expression:"form.wg_name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.form.wg_name},on:{input:function(e){e.target.composing||t.$set(t.form,"wg_name",e.target.value)}}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("性別")]),s("div",{staticClass:"col-9"},[s("div",{staticClass:"radio radio-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gender,expression:"form.gender"}],attrs:{type:"radio",name:"gender",id:"gender-1",value:"1"},domProps:{checked:t._q(t.form.gender,"1")},on:{change:function(e){t.$set(t.form,"gender","1")}}}),s("label",{attrs:{for:"gender-1"}},[t._v("男")])]),s("div",{staticClass:"radio radio-inline"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.gender,expression:"form.gender"}],attrs:{type:"radio",name:"gender",id:"gender-2",value:"2"},domProps:{checked:t._q(t.form.gender,"2")},on:{change:function(e){t.$set(t.form,"gender","2")}}}),s("label",{attrs:{for:"gender-2"}},[t._v("女")])])])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"birth-year"}},[t._v("生日")]),s("div",{staticClass:"col-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.birthdayAry[0],expression:"form.birthdayAry[0]"}],staticClass:"form-control form-control-inline",attrs:{id:"birth-year"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.birthdayAry,0,e.target.multiple?s:s[0])},function(e){t.updateDate()}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.birthYearOpt,function(e,a){return s("option",{key:"birth-year-"+a,domProps:{value:e}},[t._v(t._s(e-1911)+"年")])})],2),s("span",{staticClass:"text"},[t._v("/")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.birthdayAry[1],expression:"form.birthdayAry[1]"}],staticClass:"form-control form-control-inline",attrs:{id:"birth-month"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.birthdayAry,1,e.target.multiple?s:s[0])},function(e){t.updateDate()}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.birthMonthOpt,function(e,a){return s("option",{key:"birth-month-"+a,domProps:{value:e}},[t._v(t._s(e)+"月")])})],2),s("span",{staticClass:"text"},[t._v("/")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.birthdayAry[2],expression:"form.birthdayAry[2]"}],staticClass:"form-control form-control-inline",attrs:{id:"birth-date"},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.birthdayAry,2,e.target.multiple?s:s[0])},function(e){t.updateDate()}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.birthDateOpt,function(e,a){return s("option",{key:"birth-date-"+a,domProps:{value:e}},[t._v(t._s(e)+"日")])})],2)])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("ID")]),s("div",{staticClass:"col-9"},[t.inputs.ID?s("div",{staticClass:"d-inline-block"},[s("div",{staticClass:"p-2"},[t._v(t._s(t.form.ID))])]):s("div",{staticClass:"d-inline-block align-top"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.ID,expression:"form.ID"}],staticClass:"form-control form-control-inline",attrs:{type:"text"},domProps:{value:t.form.ID},on:{input:function(e){e.target.composing||t.$set(t.form,"ID",e.target.value)}}}),s("div",{staticClass:"invalid-feedback"},[t._v("\n                  Please insert currect ID.\n                ")])])])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("LINE ID")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.lineid,expression:"form.lineid"}],staticClass:"form-control form-control-inline",attrs:{type:"text"},domProps:{value:t.form.lineid},on:{input:function(e){e.target.composing||t.$set(t.form,"lineid",e.target.value)}}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("手機")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.mobile,expression:"form.mobile"}],staticClass:"form-control form-control-inline",attrs:{type:"tel"},domProps:{value:t.form.mobile},on:{input:[function(e){e.target.composing||t.$set(t.form,"mobile",e.target.value)},t.numberMobile]}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("住家電話")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone[0],expression:"form.phone[0]"}],staticClass:"form-control form-control-inline form-short",attrs:{type:"tel"},domProps:{value:t.form.phone[0]},on:{input:[function(e){e.target.composing||t.$set(t.form.phone,0,e.target.value)},t.numberPhone0]}}),s("span",{staticClass:"text"},[t._v("-")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.phone[1],expression:"form.phone[1]"}],staticClass:"form-control form-control-inline",attrs:{type:"tel"},domProps:{value:t.form.phone[1]},on:{input:[function(e){e.target.composing||t.$set(t.form.phone,1,e.target.value)},t.numberPhone1]}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("公司電話")]),s("div",{staticClass:"col-9"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.office_phone[0],expression:"form.office_phone[0]"}],staticClass:"form-control form-control-inline form-short",attrs:{type:"tel"},domProps:{value:t.form.office_phone[0]},on:{input:[function(e){e.target.composing||t.$set(t.form.office_phone,0,e.target.value)},t.numberOffice_phone0]}}),s("span",{staticClass:"text"},[t._v("-")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.office_phone[1],expression:"form.office_phone[1]"}],staticClass:"form-control form-control-inline",attrs:{type:"tel"},domProps:{value:t.form.office_phone[1]},on:{input:[function(e){e.target.composing||t.$set(t.form.office_phone,1,e.target.value)},t.numberOffice_phone1]}}),s("span",{staticClass:"text"},[t._v("#")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.office_phone[2],expression:"form.office_phone[2]"}],staticClass:"form-control form-control-inline form-short",attrs:{type:"tel"},domProps:{value:t.form.office_phone[2]},on:{input:[function(e){e.target.composing||t.$set(t.form.office_phone,2,e.target.value)},t.numberOffice_phone2]}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("現居地址")]),s("div",{staticClass:"col-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.address[1],expression:"form.address[1]"}],staticClass:"form-control form-control-inline",on:{click:function(e){t.initAreaData("address")},change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.address,1,e.target.multiple?s:s[0])},function(e){t.changeCity(t.form.address[1],"address")}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.cityOpt,function(e,a){return s("option",{key:"city-item-"+a,domProps:{value:e}},[t._v(t._s(e))])})],2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.address[2],expression:"form.address[2]"}],staticClass:"form-control form-control-inline form-medium",attrs:{disabled:""==t.form.address[1]},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.address,2,e.target.multiple?s:s[0])},function(e){t.changeArea(t.form.address[2].no,"address")}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.areaOpt,function(e,a){return s("option",{key:"area-item-"+a,domProps:{value:e}},[t._v(t._s(e.name))])})],2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.address[3],expression:"form.address[3]"}],staticClass:"form-control form-control-inline",attrs:{type:"text",disabled:""==t.form.address[2]||""==t.form.address[2].name},domProps:{value:t.form.address[3]},on:{input:function(e){e.target.composing||t.$set(t.form.address,3,e.target.value)}}})])]),s("div",{staticClass:"form-group row"},[s("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("公司地址")]),s("div",{staticClass:"col-9"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.office_address[1],expression:"form.office_address[1]"}],staticClass:"form-control form-control-inline",on:{click:function(e){t.initAreaData("office_address")},change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.office_address,1,e.target.multiple?s:s[0])},function(e){t.changeCity(t.form.office_address[1],"office_address")}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.officeCityOpt,function(e,a){return s("option",{key:"city-item-"+a,domProps:{value:e}},[t._v(t._s(e))])})],2),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.office_address[2],expression:"form.office_address[2]"}],staticClass:"form-control form-control-inline form-medium",attrs:{disabled:""==t.form.office_address[1]},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form.office_address,2,e.target.multiple?s:s[0])},function(e){t.changeArea(t.form.office_address[2].no,"office_address")}]}},[s("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.officeAreaOpt,function(e,a){return s("option",{key:"area-item-"+a,domProps:{value:e}},[t._v(t._s(e.name))])})],2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.office_address[3],expression:"form.office_address[3]"}],staticClass:"form-control form-control-inline",attrs:{type:"text",disabled:""==t.form.office_address[2]||""==t.form.office_address[2].name},domProps:{value:t.form.office_address[3]},on:{input:function(e){e.target.composing||t.$set(t.form.office_address,3,e.target.value)}}})])]),s("div",{staticClass:"action text-right"},[s("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("\n              取消\n            ")]),s("a",{staticClass:"btn btn-primary",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.submit()}}},[t._v("\n              儲存\n            ")])])])])])])])},g=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title"},[t._v("編輯聯絡資訊")])])}],C=s("ade3"),y=(s("ac6a"),s("f751"),s("6b54"),s("a481"),s("3022"),s("8e44")),w=(v={name:"ContactInfoModal",props:{open:{type:Boolean,default:!1},inputs:{type:Object,default:null}},watch:{},computed:Object(i["a"])({},Object(n["c"])(["Cities"])),data:function(){return{today:window.moment(),birthYearOpt:[],birthMonthOpt:[1,2,3,4,5,6,7,8,9,10,11,12],birthDateOpt:[],cityOpt:[],officeCityOpt:[],areaOpt:[],officeAreaOpt:[],form:{lv:0,familyLeader:!1,name:"",gender:0,birthdayAry:["","",""],birthday:"",mobile:"",phone:["",""],fax:["",""],ID:"",serNo:"",office_phone:["","",""],address:["",{name:"",no:""},"",""],office_address:["",{name:"",no:""},"",""],lineid:"",wg_name:""}}}},Object(C["a"])(v,"watch",{open:"openContactInfoWindow","form.lineid":function(){this.form.lineid=this.form.lineid.replace(/[^0-9a-zA-Z\-]+/g,"")},"form.ID":function(){this.form.ID=this.form.ID.replace(/[^0-9a-zA-Z]+/g,"")}}),Object(C["a"])(v,"methods",{numberMobile:function(){this.form.mobile=this.form.mobile.replace(/[^\d]/g,"")},numberPhone0:function(){this.form.phone[0]=this.form.phone[0].replace(/[^\d]/g,"")},numberPhone1:function(){this.form.phone[1]=this.form.phone[1].replace(/[^\d]/g,"")},numberOffice_phone0:function(){this.form.office_phone[0]=this.form.office_phone[0].replace(/[^\d]/g,"")},numberOffice_phone1:function(){this.form.office_phone[1]=this.form.office_phone[1].replace(/[^\d]/g,"")},numberOffice_phone2:function(){this.form.office_phone[2]=this.form.office_phone[2].replace(/[^\d]/g,"")},openContactInfoWindow:function(t){t&&(this.form.lv=this.inputs.lv,this.form.name=this.inputs.name,this.form.gender=this.inputs.gender,this.inputs.birthday&&""!=this.inputs.birthday.trim()?(this.form.birthdayAry=[Number(this.inputs.birthday.slice(0,4)),Number(this.inputs.birthday.slice(5,7)),Number(this.inputs.birthday.slice(8,10))],this.form.birthday=this.inputs.birthday):(this.form.birthdayAry=["","",""],this.form.birthday=""),this.form.mobile=this.inputs.mobile,this.form.phone=this.inputs.phone,this.form.fax=this.inputs.fax,this.form.ID=this.inputs.ID,this.form.serNo=this.inputs.serNo,this.form.office_phone=this.inputs.office_phone,this.form.address=[this.inputs.address[0],this.inputs.address[1],{no:this.inputs.address[0].trim(),name:this.inputs.address[2].trim()},this.inputs.address[3]],this.form.office_address=[this.inputs.office_address[0],this.inputs.office_address[1],{no:this.inputs.office_address[0].trim(),name:this.inputs.office_address[2].trim()},this.inputs.office_address[3]],this.form.wg_name=this.inputs.wg_name,this.form.lineid=this.inputs.lineid,this.updateDate(),this.inputs.address&&this.inputs.address[1]&&this.changeCity(this.inputs.address[1],"address"),this.inputs.office_address&&this.inputs.office_address[1]&&this.changeCity(this.inputs.office_address[1],"office_address"))},checkForm:function(){var t=/^0[0-9]{1,3}$/,e=/^[0-9]{7,10}$/,s=/^[0-9]{7,10}$/,a=""===this.form.phone[0]&&""===this.form.phone[1]||t.test(this.form.phone[0])&&e.test(this.form.phone[1]),o=""===this.form.office_phone[0]&&""===this.form.office_phone[1]||t.test(this.form.office_phone[0])&&e.test(this.form.office_phone[1]),i=""===this.form.mobile||s.test(this.form.mobile);return a&&o&&i},submit:function(){if(this.checkForm()){var t=1==this.form.birthdayAry[1].toString().length?"0"+this.form.birthdayAry[1].toString():this.form.birthdayAry[1].toString(),e=1==this.form.birthdayAry[2].toString().length?"0"+this.form.birthdayAry[2].toString():this.form.birthdayAry[2].toString(),s=[this.form.birthdayAry[0].toString(),t,e].join("-"),a=/\d{4}\-\d{2}\-\d{2}/g;a.test(s)||(s=""),this.form.birthday=s;var o=Object.assign({},this.form);""===this.form.address[2]?(o.address[0],o.office_address[0]):(o.address[2]=this.form.address[2].name,o.office_address[2]=this.form.office_address[2].name),this.$emit("submit",o)}else this.$toast.info({title:"資料格式錯誤"})},updateDate:function(){var t=this.form.birthdayAry[0],e=this.form.birthdayAry[1];if(t&&e){var s=window.moment().year(t).month(e-1).endOf("month");this.birthDateOpt=[];for(var a=0;a<s.date();a++)this.birthDateOpt.push(a+1);var o=1==this.form.birthdayAry[1].toString().length?"0"+this.form.birthdayAry[1].toString():this.form.birthdayAry[1].toString(),i=1==this.form.birthdayAry[2].toString().length?"0"+this.form.birthdayAry[2].toString():this.form.birthdayAry[2].toString();this.form.birthday=[this.form.birthdayAry[0].toString(),o,i].join("-"),"function"===typeof parseEUDC&&parseEUDC("ap")}},initAreaData:function(t){"address"===t?(this.form.address[0]="",this.form.address[2]={name:"",no:""},this.form.address[3]=""):"office_address"===t&&(this.form.office_address[0]="",this.form.office_address[2]={name:"",no:""},this.form.office_address[3]="")},changeCity:function(t,e){var s=this;Object(y["Y"])(this.$store.state.userInfo.id,t).then(function(t){t&&("address"==e?t.body&&t.body.cityAreaList&&t.body.cityAreaList.length>0?s.areaOpt=t.body.cityAreaList.map(function(t){return{no:t.ZIPCODE,name:t.AREA}}):s.areaOpt=[]:t.body&&t.body.cityAreaList&&t.body.cityAreaList.length>0?s.officeAreaOpt=t.body.cityAreaList.map(function(t){return{no:t.ZIPCODE,name:t.AREA}}):s.officeAreaOpt=[])})},changeArea:function(t,e){this.form[e][3]="",this.form[e][0]=t}}),Object(C["a"])(v,"mounted",function(){for(var t=this,e=this.today.year()-100,s=this.today.year()+1,a=e;a<s;a++)this.birthYearOpt.push(a);this.Cities.forEach(function(e){t.cityOpt.push(e.city),t.officeCityOpt.push(e.city)})}),v),I=w,x=Object(u["a"])(I,b,g,!1,null,null,null);x.options.__file="ContactInfoModal.vue";var O=x.exports,A=s("5495"),k={name:"CustomerInfo",mixins:[r["a"],l["a"]],props:{loading:{type:Boolean,default:!1},custDieStatus:{type:Boolean,default:!1},source6:{type:[String,Number],default:""}},data:function(){return{isLoading_1:this.loading,contactInfoOpen:!1,confirmDeleteOpen:!1}},computed:Object(i["a"])({},Object(n["c"])(["BaseUrl","CustInfo"])),watch:{loading:function(){this.isLoading_1=this.loading}},components:{Avatar:h,Level:_["a"],ContactInfoModal:O,ConfirmDelete:A["a"]},methods:Object(i["a"])({},Object(n["b"])(["setPageLock","updateCustInfo"]),{setCustInfo:function(t){var e={lv:Number(t.vip_lvl||"0"),familyLeader:!1,name:t.name||"",gender:t.sex||0,birthday:t.birthday||"",ID:t.id||"",age:t.age||"",serNo:t.ser_no||"",lineid:t.lineid||"",mobile:t.mobile?t.mobile.trim():"",phone:[t.home_tel_area?t.home_tel_area.trim():"",t.home_tel?t.home_tel.trim():""],office_phone:[t.corp_tel_area?t.corp_tel_area.trim():"",t.corp_tel?t.corp_tel.trim():"",t.corp_tel_ext?t.corp_tel_ext.trim():""],fax:[t.fax_area?t.fax_area.trim():"",t.fax?t.fax.trim():""],address:[t.home_addr_zip?t.home_addr_zip.trim():"",t.home_addr1?t.home_addr1.trim():"",t.home_addr2?t.home_addr2.trim():"",t.home_addr3?t.home_addr3.trim():""],office_address:[t.corp_addr_zip?t.corp_addr_zip.trim():"",t.corp_addr1?t.corp_addr1.trim():"",t.corp_addr2?t.corp_addr2.trim():"",t.corp_addr3?t.corp_addr3.trim():""],wg_name:t.wg_name||""};this.updateCustInfo(e)},contactSubmit:function(t){var e=this;this.panelClose("contactInfoOpen"),this.isLoading_1=!0,console.log(t);var s=this.$store.state.custInfo.ID||"";Object(y["i"])(this.$store.state.userInfo.id,s,t,null).then(function(s){s.header&&"200"===s.header.status?Object(y["m"])(e.$store.state.userInfo.id,e.$store.state.userInfo.id,t.ID||t.serNo).then(function(t){e.setCustInfo(t.body.customer),e.isLoading_1=!1,e.$toast.info({title:"「客戶資料」已更新"})}):(e.isLoading_1=!1,s.header.message?e.$toast.info({title:s.header.message}):e.$toast.info({title:"「客戶資料」更新失敗"}))})},deleteCustomer:function(){var t=this,e=this.$store.state.custInfo.ID||this.$store.state.custInfo.serNo;Object(y["e"])(this.$store.state.userInfo.id,e,"").then(function(e){e&&"200"==e.header.status?(t.panelClose("confirmDeleteOpen"),t.$toast.info({title:"已刪除「".concat(t.CustInfo.name,"」")}),t.$router.push({path:"/"})):(t.$toast.info({title:"錯誤「".concat(e.header.message,"」")}),t.panelClose("confirmDeleteOpen"))})}}),mounted:function(){window.$("#user-name").popover({trigger:"focus",placement:"bottom"}),window.$("#aboriginal-name").popover({trigger:"focus",placement:"bottom"})}},D=k,N=Object(u["a"])(D,a,o,!1,null,null,null);N.options.__file="CustomerInfo.vue";e["a"]=N.exports},d4c0:function(t,e,s){var a=s("0d58"),o=s("2621"),i=s("52a7");t.exports=function(t){var e=a(t),s=o.f;if(s){var n,r=s(t),l=i.f,c=0;while(r.length>c)l.call(t,n=r[c++])&&e.push(n)}return e}},f751:function(t,e,s){var a=s("5ca1");a(a.S+a.F,"Object",{assign:s("73334")})}}]);
//# sourceMappingURL=chunk-3f414d4c.ff1418c1.js.map