(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f54c6388"],{2628:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("a",{staticClass:"close",on:{click:function(e){t.$emit("close")}}},[a("i",{staticClass:"icon-close"})]),a("h3",{staticClass:"modal-title"},[t._v(t._s(t.group.grp_name)+" 群組")])]),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"button-grid p-0 four-items"},t._l(t.memberList,function(e,s){return a("a",{key:"member-btn-"+s,staticClass:"btn btn-border-green",on:{click:function(a){t.$emit("selectMem",{index:s,csid:e.id})}}},[t._v("\n            "+t._s(e.name)+"("+t._s(t._f("ageCounter")(e.birthday))+"歲)\n          ")])}))])])])])},i=[],n={name:"GroupModal",props:{open:{type:Boolean,default:!1},group:{type:Object,default:function(){return{}}},memberList:{type:Array,default:function(){return[]}}}},o=n,l=a("2877"),r=Object(l["a"])(o,s,i,!1,null,null,null);r.options.__file="GroupMemberModal.vue";e["a"]=r.exports},"26f3":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("customer-info",{attrs:{custDieStatus:t.custDie,source6:t.relationStatus.source6,loading:t.loading_1}}),a("tab-header",{attrs:{current:t.currentTab}}),a("div",{staticClass:"tab-content"},[a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"tab-pane active show"},[a("div",{staticClass:"row with-divider"},[a("div",{staticClass:"col-7"},[a("h4",{staticClass:"text-green mt-0"},[a("a",{staticClass:"btn btn-default btn-icon btn-sm float-right m-0",attrs:{role:"button"},on:{click:function(e){t.panelOpen("socialDataOpen")}}},[a("i",{staticClass:"icon-edit"})]),t._v("\n              個人資訊\n            ")]),a("div",{staticClass:"row",class:{"section-loading":t.loading_1}},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("身份註記")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.remark)))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("傳真")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.getFax(t.custPersonalInfo.fax))))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("職業")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.career)))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("服務單位")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.agency)))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("婚姻")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.marriage)))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("客戶關係")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.relatepltn)))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("Email")]),a("div",{staticClass:"col-8 text",staticStyle:{"word-break":"break-all"}},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.email)))])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("介紹人")]),a("div",{staticClass:"col-8 text"},[a("a",{staticClass:"link text-underline",on:{click:function(e){t.routeToCustDetail(t.custPersonalInfo.introducerId)}}},[t._v("\n                      "+t._s(t.custPersonalInfo.introducer)+"\n                    ")])])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("學歷")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custPersonalInfo.education)))])])])]),a("hr"),""===t.CustInfo.ID?a("div"):a("div",[a("h4",{staticClass:"text-green"},[a("a",{directives:[{name:"show",rawName:"v-show",value:!t.isReported&&t.IAACheck,expression:"!isReported && IAACheck"}],staticClass:"btn btn-default btn-sm float-right m-0",attrs:{role:"button"},on:{click:function(e){t.openIAA()}}},[t._v("\n                聯絡資訊是否有幫助\n              ")]),a("a",{directives:[{name:"show",rawName:"v-show",value:t.isReported&&t.IAACheck,expression:"isReported  && IAACheck"}],staticClass:"btn btn-default btn-sm float-right m-0",attrs:{role:"button",disabled:"disabled"}},[t._v("\n                已回報\n              ")]),t._v("\n              聯絡資訊(公司提供)\n            ")]),a("div",{staticClass:"row",class:{"section-loading":t.loading_2}},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("手機 1")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custIaa.mobile1)))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("手機 2")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custIaa.mobile2)))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("電話")]),a("div",{staticClass:"col-8 text"},[t._v(t._s(t._f("emptyField")(t.custIaa.phone)))])])]),a("div",{staticClass:"col-12"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-2 label"},[t._v("地址")]),a("div",{staticClass:"col-10 text"},[t.custIaa.address&&""!=t.custIaa.address?a("a",{staticClass:"link text-underline",attrs:{target:"_blank",href:"https://www.google.com/maps/place/"+t.custIaa.address}},[t._v("\n                          "+t._s(t._f("emptyField")(t._f("addressFormat")(t.custIaa.address)))+"\n                        ")]):a("span",[t._v("— —")])])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-2 label"},[t._v("Email")]),a("div",{staticClass:"col-10 text"},[t._v(t._s(t._f("emptyField")(t.custIaa.email)))])])])]),a("hr")]),""===t.CustInfo.ID?a("div"):a("div",[a("h4",{staticClass:"text-green"},[t._v("拒絕行銷")]),a("div",{staticClass:"row px-5",class:{"section-loading":t.loading_1}},[a("div",{staticClass:"col-4 sale-item"},[a("i",{class:t.custDecline.indexOf(1)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("簡訊行銷")])]),a("div",{staticClass:"col-4 sale-item"},[a("i",{class:t.custDecline.indexOf(2)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("電話行銷")])]),a("div",{staticClass:"col-4 sale-item"},[a("i",{class:t.custDecline.indexOf(3)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("Email行銷")])]),a("div",{staticClass:"col-4 sale-item"},[a("i",{class:t.custDecline.indexOf(4)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("郵寄行銷")])]),a("div",{staticClass:"col-8 sale-item"},[a("i",{class:t.custDecline.indexOf(5)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("業務人員行銷(非經手或服務人員)")])]),t.custDecline.indexOf(7)>-1?a("div",{staticClass:"col-8 sale-item"},[a("i",{class:t.custDecline.indexOf(7)>-1?"icon-check":"icon-close text-red"}),a("span",{staticClass:"text"},[t._v("此客戶拒絕｢產險｣共同行銷")])]):t._e()]),a("hr"),a("h4",{staticClass:"text-green"},[a("a",{staticClass:"btn btn-default btn-icon btn-sm float-right m-0",attrs:{role:"button"},on:{click:function(e){t.panelOpen("financialOpen")}}},[a("i",{staticClass:"icon-edit"})]),t._v("\n                財務狀況\n              ")]),a("div",{class:{"section-loading":t.loading_1}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-5 label"},[t._v("家庭年收入")]),a("div",{staticClass:"col-7 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.household_income))+"\n                      ")])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-5 label"},[t._v("個人年所得")]),a("div",{staticClass:"col-7 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.personal_income))+"\n                      ")])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-5 label"},[t._v("月平均投資")]),a("div",{staticClass:"col-7 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.monthly_invest))+"\n                      ")])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-5 label"},[t._v("理財工具")]),a("div",{staticClass:"col-7 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.finance_tool.toString()))+"\n                      ")])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("房貸金額")]),a("div",{staticClass:"col-8 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.houseloan))+"\n                        "),t.custFinancial.houseloan?a("span",[t._v("萬")]):t._e()])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("住屋狀況")]),a("div",{staticClass:"col-8 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.housing))+"\n                      ")])]),a("div",{staticClass:"item row"},[a("div",{staticClass:"col-4 label"},[t._v("交通工具")]),a("div",{staticClass:"col-8 text"},[t._v("\n                        "+t._s(t._f("emptyField")(t.custFinancial.vehicle))+"\n                      ")])])])])])])]),""===t.CustInfo.ID?a("div",{staticClass:"col-5"}):a("div",{staticClass:"col-5"},[a("h4",{staticClass:"text-green mt-0"},[t._v("服務申辦項目")]),a("div",{staticClass:"button-grid cards two-card px-0 pb-0"},t._l(t.serviceItems,function(e,s){return a("a",{key:"notification-item-"+s,staticClass:"card text-center no-shadow",class:0===e.status?"disabled":"",on:{click:function(a){t.selectedService=s,t.checkIsOpenServiceModal(e)}}},[a("h6",{staticClass:"m-0"},[t._v(t._s(e.name))]),1==e.status?a("small",{staticClass:"text-orange mt-1",class:{"text-underline":1==e.link?"#":null},attrs:{role:1==e.link?"button":null}},[t._v("\n                  "+t._s(e.positiveMsg)+"\n                  "),1==e.link?a("span",[t._v("❯")]):t._e()]):a("small",{staticClass:"text-red text-thin mt-1"},[t._v("\n                  "+t._s(e.negativeMsg)+"\n                ")])])})),a("h4",{staticClass:"text-green"},[t._v("商機專區")]),t.saleNotification.length?a("div",{staticClass:"button-grid two-items px-0 pb-0"},t._l(t.saleNotification,function(e,s){return a("a",{directives:[{name:"show",rawName:"v-show",value:t.saleNotificationCollapse||!t.saleNotificationCollapse&&s<6,expression:"saleNotificationCollapse || (!saleNotificationCollapse && bid < 6)"}],key:"sale-item-"+s,staticClass:"btn btn-border-green",on:{click:function(a){t.openBusinessModal(e)}}},[t._v("\n                "+t._s(e)+"\n              ")])})):a("div",{staticClass:"mt-3"},[a("div",{staticClass:"gray-block"},[t._v("目前沒有任何通知")])]),t.saleNotification.length&&t.saleNotification.length>6?a("div",[t.saleNotificationCollapse?a("a",{staticClass:"link text-underline collapse-item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.saleNotificationCollapse=!1}}},[t._v("\n                收合顯示 "),a("i",{staticClass:"icon-collapse_up"})]):a("a",{staticClass:"link text-underline collapse-item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.saleNotificationCollapse=!0}}},[t._v("\n                顯示更多 "),a("i",{staticClass:"icon-collapse_down"})])]):t._e(),a("h4",{staticClass:"text-green"},[a("a",{staticClass:"btn btn-default btn-icon btn-sm float-right m-0",attrs:{role:"button"},on:{click:function(e){t.panelOpen("addToGroupOpen")}}},[a("i",{staticClass:"icon-edit"})]),t._v("\n              群組\n            ")]),t.grpsOfCust.length?a("div",{staticClass:"button-grid two-items px-0 pb-0"},t._l(t.grpsOfCust,function(e,s){return a("a",{directives:[{name:"show",rawName:"v-show",value:t.groupCollapse||!t.groupCollapse&&s<6,expression:"groupCollapse || (!groupCollapse && bid < 6)"}],key:"group-item-"+s,staticClass:"btn btn-border-green",on:{click:function(a){t.selectGroup(e)}}},[t._v("\n                "+t._s(e.grp_name)+"\n              ")])})):a("div",{staticClass:"mt-3"},[a("div",{staticClass:"gray-block"},[t._v("目前不屬於任何群組")])]),t.grpsOfCust.length&&t.grpsOfCust.length>6?a("div",[t.groupCollapse?a("a",{staticClass:"link text-underline collapse-item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.groupCollapse=!1}}},[t._v("\n                收合顯示 "),a("i",{staticClass:"icon-collapse_up"})]):a("a",{staticClass:"link text-underline collapse-item",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.groupCollapse=!0}}},[t._v("\n                顯示更多 "),a("i",{staticClass:"icon-collapse_down"})])]):t._e()])])])])]),a("add-to-group-modal",{attrs:{open:t.addToGroupOpen,custName:t.CustInfo.name,grpsOfAgnt:t.grpsOfAgnt,grpsOfCust:t.grpsOfCust},on:{submit:t.addToGrpSubmit,close:function(e){t.panelClose("addToGroupOpen")}}}),a("vip-modal",{attrs:{open:t.vipModalOpen},on:{close:function(e){t.panelClose("vipModalOpen")}}}),a("service-modal",{attrs:{type:t.selectedService,open:t.serviceModalOpen,instance:t.selectedServiceInstance},on:{close:function(e){t.panelClose("serviceModalOpen")}}}),a("group-member-modal",{attrs:{open:t.groupModalOpen,group:t.selectedGroup,memberList:t.grpMemList},on:{selectMem:t.reGetCustDetail,close:function(e){t.panelClose("groupModalOpen")}}}),a("social-data-modal",{attrs:{open:t.socialDataOpen,inputs:t.custPersonalInfo},on:{submit:t.dataSubmit,close:function(e){t.panelClose("socialDataOpen")}}}),a("financial-modal",{attrs:{open:t.financialOpen,inputs:t.custFinancial},on:{submit:t.financialSubmit,close:function(e){t.panelClose("financialOpen")}}}),a("iaa-report-modal",{attrs:{open:t.iaaReportOpen,hasData:t.isFound},on:{submit:t.submitIAAReport,close:t.iaaReportColse}}),a("iaa-check-modal",{attrs:{open:t.iaaCheckOpen,hasData:t.isFound,queryData:t.chkIAAData,custInfo:t.customerForIAA},on:{submit:t.iaaCheckSubmit,close:function(e){t.panelClose("iaaCheckOpen")}}})],1)},i=[],n=(a("28a5"),a("ac6a"),a("a481"),a("b54a"),a("7f7f"),a("c5f6"),a("f751"),a("be94")),o=a("2f62"),l=a("872c"),r=a("8e44"),c=a("c45c"),u=a("35b6"),d=a("2628"),m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade confirm",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"birth-year"}},[t._v("Email")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],staticClass:"form-control form-control-inline",attrs:{type:"email"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("傳真")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.fax[0],expression:"form.fax[0]"}],staticClass:"form-control form-control-inline form-short",attrs:{type:"tel"},domProps:{value:t.form.fax[0]},on:{input:[function(e){e.target.composing||t.$set(t.form.fax,0,e.target.value)},t.numberFax0]}}),a("span",{staticClass:"text"},[t._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.fax[1],expression:"form.fax[1]"}],staticClass:"form-control form-control-inline",attrs:{type:"tel"},domProps:{value:t.form.fax[1]},on:{input:[function(e){e.target.composing||t.$set(t.form.fax,1,e.target.value)},t.numberFax1]}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("職業")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.career,expression:"form.career"}],staticClass:"form-control form-control-inline form-large",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"career",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.careerOpt,function(e,s){return a("option",{key:"city-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("介紹人")]),a("div",{staticClass:"col-9"},[a("span",{staticClass:"px-3"},[t._v(t._s(t.form.introducer))]),a("a",{staticClass:"btn btn-default m-0",on:{click:function(e){t.clientSearchOpen=!0}}},[t._v("\n                從既有客戶查詢\n              ")])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("服務單位")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.agency,expression:"form.agency"}],staticClass:"form-control form-control-inline",attrs:{type:"text"},domProps:{value:t.form.agency},on:{input:function(e){e.target.composing||t.$set(t.form,"agency",e.target.value)}}})])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("學歷")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.education,expression:"form.education"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"education",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.eduOpt,function(e,s){return a("option",{key:"city-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("婚姻")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.marriage,expression:"form.marriage"}],staticClass:"form-control form-control-inline",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"marriage",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.marriageOpt,function(e,s){return a("option",{key:"city-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"action text-right"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("\n              取消\n            ")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.submit()}}},[t._v("\n              儲存\n            ")])])])])])]),a("search-client-modal",{attrs:{open:t.clientSearchOpen},on:{submit:t.submitClient,close:function(e){t.clientSearchOpen=!1}}})],1)},v=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[t._v("編輯個人資訊")])])}],f=a("32ea"),p={name:"SocailDataModal",props:{open:{type:Boolean,default:!1},inputs:{type:Object,default:null}},watch:{open:"transformToEnum"},components:{SearchClientModal:f["a"]},data:function(){return{careerOpt:[{text:"農業",val:"1"},{text:"林業",val:"2"},{text:"漁業",val:"3"},{text:"畜牧業",val:"4"},{text:"建築營造業",val:"5"},{text:"製造業",val:"6"},{text:"貿易業",val:"7"},{text:"運輸倉儲業",val:"8"},{text:"金融保險業",val:"9"},{text:"娛樂運動業",val:"10"},{text:"服務業",val:"11"},{text:"餐旅美容業",val:"12"},{text:"公務員",val:"13"},{text:"教育業",val:"14"},{text:"軍警業",val:"15"},{text:"自由業",val:"16"},{text:"家管",val:"17"},{text:"學生",val:"18"},{text:"無業",val:"19"},{text:"中小學以上教師",val:"20"},{text:"律師、醫師、會計師、建築師、引水人",val:"21"},{text:"電子業",val:"22"},{text:"資訊業",val:"23"},{text:"其他",val:"24"}],eduOpt:[{text:"國中及以下",val:"1"},{text:"高中/職",val:"2"},{text:"專科",val:"3"},{text:"大學",val:"4"},{text:"研究所以上",val:"5"}],marriageOpt:[{text:"未婚",val:"1"},{text:"已婚",val:"2"},{text:"離婚",val:"3"},{text:"其他",val:"4"}],clientSearchOpen:!1,form:{fax:["",""],email:"",career:"",introducer:"",introducerId:"",agency:"",education:"",marriage:"",serNo:""}}},methods:{numberFax0:function(){this.form.fax[0]=this.form.fax[0].replace(/[^\d]/g,"")},numberFax1:function(){this.form.fax[1]=this.form.fax[1].replace(/[^\d]/g,"")},submitClient:function(t){this.form.introducer=t.name,this.form.introducerId=t.id,this.clientSearchOpen=!1},submit:function(){var t=/^[\w\-\.]+\@([\w]+\.)+/g;t.test(this.form.email)||""===this.form.email?(""===this.$store.state.custInfo.ID&&(this.form.serNo=this.$store.state.custInfo.serNo),this.$emit("submit",this.form)):this.$toast.info({title:"Email 格式不對請重新輸入"})},transformToEnum:function(t){var e=this;if(t&&this.inputs){this.form.email=this.inputs.email;var a=this.careerOpt.filter(function(t){return t.text==e.inputs.career});this.form.career=a.length?a[0].val:"",this.form.introducer=this.inputs.introducer,this.form.introducerId=this.inputs.introducerId,this.form.agency=this.inputs.agency;var s=this.eduOpt.filter(function(t){return t.text==e.inputs.education});this.form.education=s.length?s[0].val:"";var i=this.marriageOpt.filter(function(t){return t.text==e.inputs.marriage});this.form.marriage=i.length?i[0].val:"",this.form.fax=this.inputs.fax}}},mounted:function(){}},h=p,_=a("2877"),C=Object(_["a"])(h,m,v,!1,null,null,null);C.options.__file="SocialDataModal.vue";var b=C.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade confirm",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("form",{staticClass:"form"},[a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("家庭年收入")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.household_income,expression:"form.household_income"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"household_income",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.householdOpt,function(e,s){return a("option",{key:"household-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"birth-year"}},[t._v("房貸金額")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.houseloan,expression:"form.houseloan"}],staticClass:"form-control form-control-inline form-short",attrs:{type:"tel"},domProps:{value:t.form.houseloan},on:{input:function(e){e.target.composing||t.$set(t.form,"houseloan",e.target.value)}}}),a("span",{staticClass:"text"},[t._v("萬")])])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("個人年所得")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.personal_income,expression:"form.personal_income"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"personal_income",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.personalOpt,function(e,s){return a("option",{key:"city-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("住屋狀況")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.housing,expression:"form.housing"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"housing",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.housingOpt,function(e,s){return a("option",{key:"housing-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("月平均投資")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.monthly_invest,expression:"form.monthly_invest"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"monthly_invest",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.investOpt,function(e,s){return a("option",{key:"invest-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("交通工具")]),a("div",{staticClass:"col-9"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.vehicle,expression:"form.vehicle"}],staticClass:"form-control form-control-inline form-wide",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.form,"vehicle",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:""}},[t._v("請選擇")]),t._l(t.vehicleOpt,function(e,s){return a("option",{key:"vehicle-item-"+s,domProps:{value:e.val}},[t._v(t._s(e.text))])})],2)])]),a("div",{staticClass:"form-group row"},[a("label",{staticClass:"col-3 text-right",attrs:{for:"gender-1"}},[t._v("理財工具")]),a("div",{staticClass:"col-9"},t._l(t.tools,function(e,s){return a("div",{key:"tool-item-"+s,staticClass:"checkbox checkbox-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.finance_tool,expression:"form.finance_tool"}],attrs:{type:"checkbox",id:"tool-item-"+s},domProps:{value:e.val,checked:Array.isArray(t.form.finance_tool)?t._i(t.form.finance_tool,e.val)>-1:t.form.finance_tool},on:{change:function(a){var s=t.form.finance_tool,i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=e.val,l=t._i(s,o);i.checked?l<0&&t.$set(t.form,"finance_tool",s.concat([o])):l>-1&&t.$set(t.form,"finance_tool",s.slice(0,l).concat(s.slice(l+1)))}else t.$set(t.form,"finance_tool",n)}}}),a("label",{attrs:{for:"tool-item-"+s}},[t._v(t._s(e.text))])])}))]),a("div",{staticClass:"action text-right"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("\n              取消\n            ")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.submit()}}},[t._v("\n              儲存\n            ")])])])])])])])},k=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[t._v("編輯財務狀況")])])}],x=(a("5df3"),a("4f7f"),{name:"SocailDataModal",props:{open:{type:Boolean,default:!1},inputs:{type:Object,default:null}},watch:{open:"transformToEnum","form.houseloan":function(){this.form.houseloan=this.form.houseloan.replace(/[^\d]/g,"")}},computed:{},data:function(){return{householdOpt:[{text:"60萬以下",val:"1"},{text:"61萬~80萬",val:"2"},{text:"81萬~100萬",val:"3"},{text:"101萬~150萬",val:"4"},{text:"151萬~200萬",val:"5"},{text:"201萬~350萬",val:"6"},{text:"351萬以上",val:"7"}],personalOpt:[{text:"無",val:"1"},{text:"30萬以下",val:"2"},{text:"31~60萬",val:"3"},{text:"61~100萬",val:"4"},{text:"101~200萬",val:"5"},{text:"201萬以上",val:"6"}],housingOpt:[{text:"自有",val:"1"},{text:"租賃",val:"2"},{text:"其他親屬所有",val:"3"},{text:"其他",val:"4"}],investOpt:[{text:"無",val:"1"},{text:"3千以下",val:"2"},{text:"3千~5千",val:"3"},{text:"5千~1萬",val:"4"},{text:"1萬~2萬",val:"5"},{text:"2萬~5萬",val:"6"},{text:"5萬以上",val:"7"}],vehicleOpt:[{text:"無",val:"1"},{text:"機車",val:"2"},{text:"汽車",val:"3"},{text:"機車與汽車",val:"4"}],tools:[{text:"定存",val:"1"},{text:"保險",val:"2"},{text:"共同基金",val:"3"},{text:"標會",val:"4"},{text:"債券",val:"5"},{text:"股票",val:"6"},{text:"期貨外匯",val:"7"},{text:"不動產",val:"8"},{text:"其他",val:"9"}],form:{personal_income:"",household_income:"",houseloan:"",housing:"",monthly_invest:"",finance_tool:[],vehicle:""}}},methods:{submit:function(){this.$emit("submit",this.form)},transformToEnum:function(){var t=this;this.form.personal_income=this.inputs.personal_income?this.personalOpt.filter(function(e){return e.text==t.inputs.personal_income})[0].val:"",this.form.household_income=this.inputs.household_income?this.householdOpt.filter(function(e){return e.text==t.inputs.household_income})[0].val:"",this.form.houseloan=this.inputs.houseloan+"",this.form.housing=this.inputs.housing?this.housingOpt.filter(function(e){return e.text==t.inputs.housing})[0].val:"",this.form.monthly_invest=this.inputs.monthly_invest?this.investOpt.filter(function(e){return e.text==t.inputs.monthly_invest})[0].val:"";var e=new Set(this.inputs.finance_tool.split(",").map(function(t){return t.trim()}));this.form.finance_tool=this.tools.filter(function(t){return e.has(t.text)}).map(function(t){return t.val}),this.form.vehicle=this.inputs.vehicle?this.vehicleOpt.filter(function(e){return e.text==t.inputs.vehicle})[0].val:""}},mounted:function(){}}),y=x,I=Object(_["a"])(y,g,k,!1,null,null,null);I.options.__file="FinancialModal.vue";var w=I.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade confirm",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("h4",[t._v("聯絡資訊(公司提供)是否協助我找到客戶?")]),a("div",{staticClass:"radio radio-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaUseful,expression:"iaaUseful"}],attrs:{type:"radio",name:"iaa_useful",id:"iaa-useful-1",value:"1"},domProps:{checked:t._q(t.iaaUseful,"1")},on:{change:function(e){t.iaaUseful="1"}}}),a("label",{attrs:{for:"iaa-useful-1"}},[t._v("是")])]),a("div",{staticClass:"radio radio-inline"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaUseful,expression:"iaaUseful"}],attrs:{type:"radio",name:"iaa_useful",id:"iaa-useful-2",value:"0"},domProps:{checked:t._q(t.iaaUseful,"0")},on:{change:function(e){t.iaaUseful="0"}}}),a("label",{attrs:{for:"iaa-useful-2"}},[t._v("否")])]),a("div",{staticClass:"action text-right"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.cancel()}}},[t._v("\n            取消\n          ")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.send()}}},[t._v("\n            確定\n          ")])])])])])])},A=[],D={name:"IaaReportModal",props:{open:{type:Boolean,default:!1},hasData:{type:Boolean,default:!1}},data:function(){return{iaaUseful:0}},methods:{send:function(){var t=this,e=!1;if(this.hasData)if(1==this.iaaUseful){var a={tel:0,mobile1:0,mobile2:0,addr:0,email:0};Object(r["zb"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,this.iaaUseful,a,"update").then(function(a){a.header.status&&"200"==a.header.status&&(e=!0),t.$emit("close",e)})}else this.$emit("submit",this.iaaUseful);else if(1==this.iaaUseful){a={tel:0,mobile1:0,mobile2:0,addr:0,email:0};Object(r["b"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,this.iaaUseful,a,"add").then(function(a){a.header.status&&"200"==a.header.status&&(e=!0),t.$emit("close",e)})}else this.$emit("submit",this.iaaUseful)},cancel:function(){this.$emit("close",!1)}}},$=D,M=Object(_["a"])($,O,A,!1,null,null,null);M.options.__file="IaaReportModal.vue";var N=M.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade confirm",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("h4",[t._v("下列何者無法聯繫到客戶")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-1",value:"mobile1"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"mobile1")>-1:t.iaaCheck},on:{change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="mobile1",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-1"}},[t._v("手機1："+t._s(t.custInfo.mobile01))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-2",value:"mobile2"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"mobile2")>-1:t.iaaCheck},on:{change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="mobile2",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-2"}},[t._v("手機2："+t._s(t.custInfo.mobile02))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-3",value:"phone"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"phone")>-1:t.iaaCheck},on:{change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="phone",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-3"}},[t._v("電話："+t._s(t.custInfo.tel_newest_area)+" - "+t._s(t.custInfo.tel_newest))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-4",value:"address"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"address")>-1:t.iaaCheck},on:{change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="address",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-4"}},[t._v("地址："+t._s(t.custInfo.addr_newest_postal_cd)+t._s(t.custInfo.addr_newest_city_nm)+t._s(t.custInfo.addr_newest_line_1)+t._s(t.custInfo.addr_newest_line_2)+" ")])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-5",value:"email"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"email")>-1:t.iaaCheck},on:{change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="email",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-5"}},[t._v("Email："+t._s(t.custInfo.email))])])]),a("div",{staticClass:"col-6"},[a("div",{staticClass:"checkbox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.iaaCheck,expression:"iaaCheck"}],attrs:{type:"checkbox",name:"",id:"checkbox-6",value:"all"},domProps:{checked:Array.isArray(t.iaaCheck)?t._i(t.iaaCheck,"all")>-1:t.iaaCheck},on:{click:function(e){t.selectAll()},change:function(e){var a=t.iaaCheck,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="all",o=t._i(a,n);s.checked?o<0&&(t.iaaCheck=a.concat([n])):o>-1&&(t.iaaCheck=a.slice(0,o).concat(a.slice(o+1)))}else t.iaaCheck=i}}}),a("label",{attrs:{for:"checkbox-6"}},[t._v("以上皆是")])])])]),a("div",{staticClass:"action text-right"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.cancelIAA()}}},[t._v("\n            取消\n          ")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.sendIAA()}}},[t._v("\n            確定\n          ")])])])])])])},P=[],E={name:"IaaCheckModal",props:{open:{type:Boolean,default:!1},hasData:{type:Boolean,default:!1},custInfo:{type:Object,default:function(){return{party_id:"",mobile01:"",mobile02:"",tel_newest_area:"",tel_newest:"",tel_newest_ext:"",addr_newest_postal_cd:"",addr_newest_city_nm:"",addr_newest_line_1:"",addr_newest_line_2:"",email:""}}},queryData:{type:Array,default:function(){return[]}}},data:function(){return{iaaCheck:[]}},mounted:function(){},watch:{open:"selectOption"},methods:{sendIAA:function(){var t,e=this;t=0==this.iaaCheck.indexOf("all")?{tel:1,mobile1:1,mobile2:1,addr:1,email:1}:{tel:-1!=this.iaaCheck.indexOf("phone")?1:0,mobile1:-1!=this.iaaCheck.indexOf("mobile1")?1:0,mobile2:-1!=this.iaaCheck.indexOf("mobile2")?1:0,addr:-1!=this.iaaCheck.indexOf("address")?1:0,email:-1!=this.iaaCheck.indexOf("email")?1:0};var a=!1;this.hasData?Object(r["zb"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,0,t,"update").then(function(t){t.header.status&&"200"==t.header.status&&(a=!0),e.$emit("submit",a)}):Object(r["b"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,0,t,"add").then(function(t){t.header.status&&"200"==t.header.status&&(a=!0),e.$emit("submit",a)})},cancelIAA:function(){this.$emit("close")},selectAll:function(){this.iaaCheck.length>0?this.iaaCheck=[]:this.iaaCheck.push("phone","mobile1","mobile2","address","email")},selectOption:function(){this.iaaCheck=this.queryData}}},L=E,T=Object(_["a"])(L,S,P,!1,null,null,null);T.options.__file="IaaCheckModal.vue";var F=T.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open},attrs:{id:"add-to-group"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("div",{staticClass:"row my-4"},[a("div",{staticClass:"col-12"},[a("form",{staticClass:"form"},[a("div",{staticClass:"input-group input-lg"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",name:"keyword",id:"keyword",placeholder:"可輸入群組名稱進行搜尋..."},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-icon",attrs:{type:"submit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.doSearch()}}},[a("i",{staticClass:"icon-search i-24"})])])])])]),a("div",{staticClass:"row row-tables newTable"},[a("div",{staticClass:"col-table pr-0"},[a("h5",[t._v("可選擇的群組名單")]),a("table",{staticClass:"table datatable insurance-green"},[a("thead",[a("tr",[a("th",{attrs:{width:Math.floor(275.2)+"px"},on:{click:function(e){t.sortArray("unselected")}}},[t._v("群組名稱")]),a("th")])]),a("tbody",t._l(t.unselectedData,function(e,s){return a("tr",{key:"familiy-item-"+s},[a("td",{attrs:{width:Math.floor(275.2)+"px"}},[t._v(t._s(e.grp_name))]),a("td",[a("a",{staticClass:"text-orange",on:{click:function(e){t.addGroup(s)}}},[a("i",{staticClass:"icon-add_new i-20"})])])])}))])]),t._m(0),a("div",{staticClass:"col-table "},[a("h5",[a("a",{staticClass:"link text-underline"},[t._v(t._s(t.custName))]),t._v(" 已加入的群組")]),a("table",{staticClass:"table datatable insurance-green"},[a("thead",[a("tr",[a("th",{attrs:{width:Math.floor(275.2)+"px"},on:{click:function(e){t.sortArray("selected")}}},[t._v("群組名稱")]),a("th")])]),a("tbody",t._l(t.selectedData,function(e,s){return a("tr",{key:"familiy-item-"+s},[a("td",{attrs:{width:Math.floor(275.2)+"px"}},[t._v(t._s(e.grp_name))]),a("td",[a("a",{staticClass:"text-red",on:{click:function(e){t.removeGroup(s)}}},[a("i",{staticClass:"icon-trashcan i-20"})])])])}))])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"actions text-right mt-4"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("取消")]),a("a",{staticClass:"btn btn-primary",on:{click:function(e){t.$emit("submit",t.selectedData)}}},[t._v("加入")])])])])])])])])},R=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"px-2 text-light-green text-center col-split"},[a("i",{staticClass:"icon-forward"})])}],G=(a("55dd"),{name:"AddToGroupModal",props:{open:{type:Boolean,default:!1},custName:{type:String,default:""},grpsOfAgnt:{type:Array,default:function(){return[]}},grpsOfCust:{type:Array,default:function(){return[]}}},watch:{open:"initData"},data:function(){return{keyword:"",selectedTable:null,unselectedTable:null,selectedData:[],unselectedData:[],selectedSort:!0,unselectedSort:!0}},methods:{addGroup:function(t){this.selectedData.push(this.unselectedData.splice(t,1)[0]),this.sortArray()},removeGroup:function(t){this.unselectedData.push(this.selectedData.splice(t,1)[0]),this.sortArray()},sortArray:function(t){"unselected"===t?this.unselectedSort?(this.unselectedSort=!this.unselectedSort,this.unselectedData=this.unselectedData.sort(function(t,e){return e.grp_name.charCodeAt()-t.grp_name.charCodeAt()})):(this.unselectedSort=!this.unselectedSort,this.unselectedData=this.unselectedData.sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()})):"selected"===t?this.selectedSort?(this.selectedSort=!this.selectedSort,this.selectedData=this.selectedData.sort(function(t,e){return e.grp_name.charCodeAt()-t.grp_name.charCodeAt()})):(this.selectedSort=!this.selectedSort,this.selectedData=this.selectedData.sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()})):(this.selectedData=this.selectedData.sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()}),this.unselectedData=this.unselectedData.sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()}))},doSearch:function(){var t=this,e=new Set(this.selectedData.map(function(t){return t.grp_id}));this.unselectedData=this.grpsOfAgnt.filter(function(e){return e.grp_name.indexOf(t.keyword)>-1}).filter(function(t){return!e.has(t.grp_id)}),this.renderTableData(this.unselectedTable,this.unselectedData,0)},initData:function(){var t=new Set(this.grpsOfCust.map(function(t){return t.grp_id}));this.unselectedData=this.grpsOfAgnt.filter(function(e){return!t.has(e.grp_id)}).sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()}),this.selectedData=this.grpsOfCust.map(function(t){return t}).sort(function(t,e){return t.grp_name.charCodeAt()-e.grp_name.charCodeAt()})}},mounted:function(){this.initData()}}),B=G,U=(a("3e59"),Object(_["a"])(B,j,R,!1,null,"110dc882",null));U.options.__file="AddToGroupModal.vue";var V=U.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog",staticStyle:{width:"900px"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("a",{staticClass:"close",on:{click:function(e){t.$emit("close")}}},[a("i",{staticClass:"icon-close"})]),a("div",{staticClass:"col-12 pl-0"},[a("h3",{staticClass:"modal-title"},[t._v("\n            "+t._s(t.serviceName)+"\n          ")])])]),a("div",{staticClass:"modal-body"},[2==t.type?a("table",{staticClass:"table insurance-green"},[t._m(0),a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:"row-data-"+s},[a("td",[t._v(t._s(e.currency))]),a("td",[t._v(t._s(e.bank))]),a("td",[t._v(t._s(e.account))])])}))]):t._e(),3==t.type?a("table",{staticClass:"table insurance-green"},[t._m(1),a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:"table-data-"+s},[a("td",{staticClass:"text-center"},[t._v(t._s(e.email))])])}))]):t._e(),4==t.type?a("table",{staticClass:"table insurance-green"},[t._m(2),a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:"table-data-"+s},[a("td",{staticClass:"text-center"},[t._v(t._s(e.numbers))])])}))]):t._e(),5==t.type?a("table",{staticClass:"table insurance-green"},[t._m(3),a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:"table-item-"+s},[a("td",[t._v(t._s(e.account))]),a("td",[t._v(t._s(e.endAt))]),a("td",[t._v(t._s(e.mainMember))]),a("td",[t._v(t._s(e.subMember))])])}))]):t._e(),6==t.type?a("table",{staticClass:"table insurance-green"},[t._m(4),a("tbody",t._l(t.tableData,function(e,s){return a("tr",{key:"table-item-"+s},[a("td",[t._v(t._s(e.no))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.rate))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("numberFormat")(t._f("emptyDashField")(e.couldLoan))))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("numberFormat")(t._f("emptyDashField")(e.isLoan))))]),a("td",{staticClass:"text-right"},[t._v(t._s(t._f("emptyDashField")(e.interestEnd)))])])}))]):t._e()])])])])},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("幣別")]),a("th",[t._v("銀行別")]),a("th",[t._v("帳號後四碼")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("Email")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("未辦理轉帳件保單號碼")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("信用卡銀行/卡號後四碼")]),a("th",[t._v("到期日")]),a("th",[t._v("主會員")]),a("th",[t._v("從屬會員")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("保單號碼")]),a("th",[t._v("險種名稱")]),a("th",[t._v("利率")]),a("th",{staticClass:"text-right"},[t._v("總可貸金額")]),a("th",{staticClass:"text-right"},[t._v("已貸金額")]),a("th",{staticClass:"text-right"},[t._v("計息終日")])])])}],Y={name:"ServiceModal",props:{open:{type:Boolean,default:!1},type:{type:Number,default:0},instance:{type:Object,default:function(){return{}}}},data:function(){return{serviceName:"",tableData:[]}},watch:{type:"getService"},methods:{getService:function(t){if(this.open)switch(t){case 0:this.serviceName="網路服務線上變更";break;case 1:this.serviceName="行動服務";break;case 2:this.serviceName="一指通",this.tableData=this.instance.payment_apply.map(function(t){return{bank:t.bank_sname,account:t.account,currency:t.curr}});break;case 3:this.serviceName="電子單據",this.tableData=[{email:this.instance.csemail}];break;case 4:this.serviceName="轉帳服務",this.tableData=this.instance.plcnos.map(function(t){return{numbers:t}});break;case 5:this.serviceName="易CALL保",this.tableData=this.instance.ecall.map(function(t){return{account:"".concat(t.BNK_SNM,"/").concat(t.ACCOUNT),endAt:t.CEPLCSDT,mainMember:t.VIP_NAME,subMember:t.PEOPLE}});break;case 6:this.serviceName="保單貸款",this.tableData=this.instance.pl_loan.map(function(t){return{no:t.PLCNO,name:t.PLAN_NAME,rate:t.RATE,couldLoan:t.AVLAMT,isLoan:t.USEAMT,interestEnd:t.INT_END_DATE}});break;case 7:this.serviceName="理賠抵繳";break}this.records=[{series:1,last:192667874,shouldPayAt:"106/06/07",payAt:"106/06/07",rate:"1.99",pay:2e5,payment:"轉帳(合作金庫6076)"}]}}},W=Y,z=Object(_["a"])(W,H,q,!1,null,null,null);z.options.__file="ServiceModal.vue";var X=z.exports,J=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog",staticStyle:{width:"900px"}},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("a",{staticClass:"close",on:{click:function(e){t.$emit("close")}}},[a("i",{staticClass:"icon-close"})]),t._m(0)]),t._m(1)])])])},K=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-9 pl-0"},[a("h3",{staticClass:"modal-title"},[t._v("\n            差額升等VIP\n          ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-body"},[a("table",{staticClass:"datatable table insurance-green",attrs:{id:"vip-table"}},[a("thead",[a("tr",[a("th",[t._v("目標名單類型")]),a("th",[t._v("保戶姓名")]),a("th",[t._v("保戶ID")]),a("th",[t._v("現行等級")]),a("th",[t._v("目標等級")]),a("th",[t._v("保費差額")]),a("th",[t._v("手機號碼")])])]),a("tbody",[a("tr",{staticClass:"table-warning"},[a("td",[t._v("明年度降等保戶目標名單")]),a("td",[t._v("陳君君")]),a("td",[t._v("A223XXX789")]),a("td",[t._v("白金VIP")]),a("td",[t._v("維持"),a("br"),t._v("白金VIP")]),a("td",[t._v("34萬")]),a("td",[t._v("0922133647")])]),a("tr",[a("td",[t._v("明年度降等保戶目標名單")]),a("td",[t._v("陳君君")]),a("td"),a("td",[t._v("白金VIP")]),a("td",[t._v("維持"),a("br"),t._v("白金VIP")]),a("td",[t._v("34萬")]),a("td",[t._v("0922133647")])])])])])}],Q={name:"VipModal",props:{open:{type:Boolean,default:!1}},watch:{open:"renderTable"},data:function(){return{vipTable:null}},methods:{renderTable:function(t){var e=this;t&&!this.vipTable&&setTimeout(function(){e.vipTable=window.$("#vip-table").DataTable({ordering:!0,paging:!1,searching:!1})},500)}}},Z=Q,tt=Object(_["a"])(Z,J,K,!1,null,null,null);tt.options.__file="VipModal.vue";var et=tt.exports,at=(a("5118"),a("3022"),{remark:"",fax:"",career:"",agency:"",marriage:"",relate:"",introducer:"",introducerId:"",email:"",education:""}),st={household_income:"",personal_income:"",monthly_invest:"",finance_tool:"",houseloan:"",housing:"",vehicle:""},it=[],nt={name:"CustomerDetail1",mixins:[l["a"]],data:function(){return{loading_1:!0,loading_2:!0,selectedService:0,relationStatus:{},custDie:!1,selectedServiceInstance:null,currentTab:0,custPersonalInfo:at,custIaa:{},custFinancial:st,custDecline:it,isFound:null,chkIAAData:[],isReported:!1,saleNotificationCollapse:!1,groupCollapse:!1,selectedInsureType:1,vipModalOpen:!1,addToGroupOpen:!1,serviceModalOpen:!1,groupModalOpen:!1,socialDataOpen:!1,financialOpen:!1,iaaReportOpen:!1,iaaCheckOpen:!1,selectedGroup:{grp_name:"",grp_id:""},selectedNo:"",serviceCHANGEONLINE:{name:"網路服務線上變更",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦"},serviceESERVER:{name:"行動服務",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦"},servicePAYMENT_APPLY:{name:"一指通",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦",payment_apply:[]},serviceCSEMAIL:{name:"電子單據",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦",csemail:""},servicePLCNOS:{name:"轉帳申請",status:0,link:0,positiveMsg:"",negativeMsg:"尚無需求",plcnos:[]},serviceSHOW_ECALL:{name:"易call保",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"未辦理",ecall:[]},servicePL_LOAN:{name:"保單貸款",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦",pl_loan:[]},serviceCLAIM_OFFSET_BILL:{name:"理賠抵繳",status:0,link:0,positiveMsg:"已辦理",negativeMsg:"尚未申辦"},customerForIAA:{},serviceItems:[],saleNotification:["未買投資型客戶","差額升等VIP","滿期金帳戶","年金客戶","車險預約投保","保單貸款","滿期金帳戶","年金客戶","車險預約投保","保單貸款"],grpsOfCust:[],grpMemList:[],grpsOfAgnt:[],currentDelIndex:0}},components:{CustomerInfo:c["a"],TabHeader:u["a"],GroupMemberModal:d["a"],SocialDataModal:b,FinancialModal:w,IaaReportModal:N,IaaCheckModal:F,AddToGroupModal:V,ServiceModal:X,VipModal:et},computed:Object(n["a"])({},Object(o["c"])(["BaseUrl","CustInfo"]),{IAACheck:function(){var t=!1;for(var e in this.custIaa)""!==this.custIaa[e]&&(t=!0);return t}}),watch:{$route:"initCustomerDetail1",CustInfo:function(t,e){if(""==e.ID&&""!=t.ID&&""!=e.serNo&&""!=t.serNo){var a=t;a["serNo"]="",this.updateCustInfo(a),this.initCustomerDetail1()}}},methods:Object(n["a"])({},Object(o["b"])(["setPageLock","updateCustInfo","updateCustID","updateSerNo"]),{openBusinessModal:function(t){"差額升等VIP"===t&&this.panelOpen("vipModalOpen")},financialSubmit:function(t){var e=this;this.panelClose("financialOpen");var a=Object.assign({},t),s=["0","0","0","0","0","0","0","0","0"];t.finance_tool.map(function(t){return s[Number(t)-1]=t}),a.finance_tool=s.join(""),Object(r["h"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,a).then(function(t){t.header&&"200"==t.header.status?(e.$toast.info({title:"「客戶資料」已更新"}),e.initCustomerDetail1()):e.$toast.info({title:"「客戶資料」更新失敗"})})},dataSubmit:function(t){var e=this;this.panelClose("socialDataOpen"),Object(r["i"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,null,t).then(function(t){t.header.status&&"200"==t.header.status?(e.$toast.info({title:"「客戶資料」已更新"}),e.initCustomerDetail1()):e.$toast.info({title:"「客戶資料」更新失敗 代碼:".concat(""|t.header.status)})})},selectGroup:function(t){this.getGroupMamberByGrpId(this.$store.state.userInfo.id,t.grp_id,t)},reGetCustDetail:function(t){this.panelClose("groupModalOpen"),this.updateCustID(t.csid),this.loading_1=!0,this.initCustomerDetail1()},submitIAAReport:function(){var t=this;this.panelClose("iaaReportOpen"),Object(r["cb"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,"queryAPI").then(function(e){e.body&&(t.customerForIAA=e.body.detail||{})}),this.panelOpen("iaaCheckOpen")},iaaCheckSubmit:function(t){this.isReported=t,this.panelClose("iaaCheckOpen"),this.$toast.info({title:"感謝您的回報，後續將由相關單位與客戶確認，並依實際聯繫情形更新資訊！！"})},iaaReportColse:function(t){t&&(this.isReported=t,this.$toast.info({title:"感謝您的回報，後續將由相關單位與客戶確認，並依實際聯繫情形更新資訊！！"})),this.panelClose("iaaReportOpen")},iaaCheckColse:function(t){t&&(this.isReported=t,this.$toast.info({title:"感謝您的回報，後續將由相關單位與客戶確認，並依實際聯繫情形更新資訊！！"})),this.panelClose("iaaCheckOpen")},setCustInfo:function(t){var e={lv:Number(t.vip_lvl||"0"),familyLeader:!1,name:t.name||"",gender:t.sex||0,birthday:t.birthday||"",ID:t.id||"",age:t.age||"",serNo:t.ser_no||"",lineid:t.lineid||"",mobile:t.mobile?t.mobile.trim():"",phone:[t.home_tel_area?t.home_tel_area.trim():"",t.home_tel?t.home_tel.trim():""],office_phone:[t.corp_tel_area?t.corp_tel_area.trim():"",t.corp_tel?t.corp_tel.trim():"",t.corp_tel_ext?t.corp_tel_ext.trim():""],fax:[t.fax_area?t.fax_area.trim():"",t.fax?t.fax.trim():""],address:[t.home_addr_zip?t.home_addr_zip.trim():"",t.home_addr1?t.home_addr1.trim():"",t.home_addr2?t.home_addr2.trim():"",t.home_addr3?t.home_addr3.trim():""],office_address:[t.corp_addr_zip?t.corp_addr_zip.trim():"",t.corp_addr1?t.corp_addr1.trim():"",t.corp_addr2?t.corp_addr2.trim():"",t.corp_addr3?t.corp_addr3.trim():""],wg_name:t.wg_name||""};this.updateCustInfo(e),this.loading_1=!1},setCustPersonalInfo:function(t){var e="";if(t.idmark){var a=t.idmark.source1&&"1"==t.idmark.source1?"要":"",s=t.idmark.source2&&"1"==t.idmark.source2?"被":"",i=t.idmark.source3&&"1"==t.idmark.source3?"意":"",n=t.idmark.source4&&"1"==t.idmark.source4?"產":"",o=t.idmark.source5&&"1"==t.idmark.source5?"團":"",l=t.idmark.source6&&"1"==t.idmark.source6?"借":"";e=a+s+i+n+o+l}var r=t.relation?t.relation.source1_pltn:"0";switch(r){case"0":r="";break;case"1":r="經手件";break;case"2":r="收費件";break;case"3":r="經手收費件";break;default:r="";break}var c="";if(t.relation){var u=t.relation.source1&&"1"==t.relation.source1?"壽":"",d=t.relation.source2&&"1"==t.relation.source2?"產":"",m=t.relation.source3&&"1"==t.relation.source3?"意":"",v=t.relation.source4&&"1"==t.relation.source4?"借":"",f=t.relation.source5&&"1"==t.relation.source5?"團":"",p=t.relation.source6&&"1"==t.relation.source6?"他":"";c=u+d+m+v+f+p}this.relationStatus=t.relation;var h="";switch(t.marry){case"1":h="未婚";break;case"2":h="已婚";break;case"3":h="離婚";break;case"4":h="其他"}var _="";switch(t.edu){case"1":_="國中及以下";break;case"2":_="高中/職";break;case"3":_="專科";break;case"4":_="大學";break;case"5":_="研究所以上"}var C="";switch(t.job){case"1":C="農業";break;case"2":C="林業";break;case"3":C="漁業";break;case"4":C="畜牧業";break;case"5":C="建築營造業";break;case"6":C="製造業";break;case"7":C="貿易業";break;case"8":C="運輸倉儲業";break;case"9":C="金融保險業";break;case"10":C="娛樂運動業";break;case"11":C="服務業";break;case"12":C="餐旅美容業";break;case"13":C="公務員";break;case"14":C="教育業";break;case"15":C="軍警業";break;case"16":C="自由業";break;case"17":C="家管";break;case"18":C="學生";break;case"19":C="無業";break;case"20":C="中小學以上教師";break;case"21":C="律師、醫師、會計師、建築師、引水人";break;case"22":C="電子業";break;case"23":C="資訊業";break;case"24":C="其他"}this.custPersonalInfo={remark:e.length>0?e:"空",fax:[t.fax_area?t.fax_area.trim():"",t.fax?t.fax.trim():""],career:C,agency:t.corp||"",marriage:h,relatepltn:r,relate:c.length>0?c:"空",introducer:t.introducer_name||"",introducerId:t.introducer||"",email:t.email||"",education:_}},isEmptyObj:function(t){for(var e in t)return!1;return!0},setCustIaa:function(t){if(t.detail){var e=t.detail||{};this.custIaa={mobile1:e.mobile01||"",mobile2:e.mobile02||"",phone:e.tel_newest_area||e.tel_newest?e.tel_newest_area+"-"+e.tel_newest:"",address:e.addr_newest_postal_cd+e.addr_newest_city_nm+e.addr_newest_line_1+e.addr_newest_line_2,email:e.email||""}}},setCustFinancial:function(t){if(this.isEmptyObj(t))return!1;var e="";switch(t.family_incom){case"1":e="60萬以下";break;case"2":e="61萬~80萬";break;case"3":e="81萬~100萬";break;case"4":e="101萬~150萬";break;case"5":e="151萬~200萬";break;case"6":e="201萬~350萬";break;case"7":e="351萬以上"}var a="";switch(t.incommy){case"1":a="無";break;case"2":a="30萬以下";break;case"3":a="31~60萬";break;case"4":a="61~100萬";break;case"5":a="101~200萬";break;case"6":a="201萬以上"}var s="";switch(t.invest){case"1":s="無";break;case"2":s="3千以下";break;case"3":s="3千~5千";break;case"4":s="5千~1萬";break;case"5":s="1萬~2萬";break;case"6":s="2萬~5萬";break;case"7":s="5萬以上"}var i="";switch(t.house){case"1":i="自有";break;case"2":i="租賃";break;case"3":i="其他親屬所有";break;case"4":i="其他"}var n="";switch(t.car){case"1":n="無";break;case"2":n="機車";break;case"3":n="汽車";break;case"4":n="機車與汽車"}var o=[{text:"定存",val:"1"},{text:"保險",val:"2"},{text:"共同基金",val:"3"},{text:"標會",val:"4"},{text:"債券",val:"5"},{text:"股票",val:"6"},{text:"期貨外匯",val:"7"},{text:"不動產",val:"8"},{text:"其他",val:"9"}],l=[];o.filter(function(e){return t.finance.indexOf(e.val)>=0}).map(function(t){return l.push(t.text)});l=l.join(),this.custFinancial={household_income:e||"",personal_income:a||"",monthly_invest:s||"",finance_tool:l||"",houseloan:t.loan_amt||"",housing:i||"",vehicle:n||""}},setCustDecline:function(t,e){this.custDecline=["1"===t.sms_promote?1:0,"1"===t.phone_promote?2:0,"1"===t.email_promote?3:0,"1"===t.mail_promote?4:0,"1"===t.agnt_promote?5:0,"1"===t.stop_personal_data?6:0,!e.relation||"1"!==e.relation.source2&&"2"!==e.relation.source2?0:7]},setCustServiceItem:function(t){"Y"===t.changeonline&&(this.changeonline.status=1),t.eserver&&t.eserver.indexOf("已辦理")>-1&&(this.serviceESERVER.status=1,this.serviceESERVER.link=1,this.serviceESERVER.positiveMsg=t.eserver),t.payment_apply&&t.payment_apply.length>0&&(this.servicePAYMENT_APPLY.status=1,this.servicePAYMENT_APPLY.link=1,this.servicePAYMENT_APPLY.payment_apply=t.payment_apply),t.csemail&&t.csemail.indexOf("未辦理")<0&&t.csemail.length>0&&(this.serviceCSEMAIL.status=1,this.serviceCSEMAIL.link=1,this.serviceCSEMAIL.csemail=t.csemail),t.plcnos&&t.plcnos.length>0&&(this.servicePLCNOS.status=1,this.servicePLCNOS.link=1,this.servicePLCNOS.plcnos=t.plcnos),t.show_ecall&&t.show_ecall.indexOf("已辦理")>-1?this.serviceSHOW_ECALL.status=1:t.show_ecall&&t.show_ecall.indexOf("詳細資訊")>-1&&(this.serviceSHOW_ECALL.status=1,this.serviceSHOW_ECALL.link=1,this.serviceSHOW_ECALL.positiveMsg=t.show_ecall,this.serviceSHOW_ECALL.ecall=t.ecall),t.pl_loan&&t.pl_loan.length>0&&(this.servicePL_LOAN.status=1,this.servicePL_LOAN.link=1,this.servicePL_LOAN.pl_loan=t.pl_loan),t.claim_offset_bill&&t.claim_offset_bill.indexOf("尚未申辦")<0&&(this.serviceCLAIM_OFFSET_BILL.status=1)},checkIsOpenServiceModal:function(t){1==t.link&&(this.selectedServiceInstance=t,this.panelOpen("serviceModalOpen"))},getGroupMamberByGrpId:function(t,e,a){var s=this;Object(r["D"])(t,e).then(function(t){s.grpMemList=t,s.selectedGroup=a,s.panelOpen("groupModalOpen")})},addToGrpSubmit:function(t){var e=this;Object(r["xb"])(this.$store.state.userInfo.id,this.$store.state.userInfo.id,this.$store.state.custInfo.ID,t).then(function(t){if(t.header&&"200"===t.header.status)if(Object(r["G"])(e.$store.state.userInfo.id,e.$store.state.custInfo.ID).then(function(t){t.body.groups?e.grpsOfCust=t.body.groups.map(function(t){return{grp_id:t.grp_id,grp_name:t.grp_name}}):e.grpsOfCust=[]}),"200"==t.header.status)e.$toast.info({title:"加入群組成功"});else{var a=t.header.message||"";a=a.replace("%",e.$store.state.custInfo.name),e.$toast.info({title:a})}else{var s=t.header.message||"";s=s.replace("%",e.$store.state.custInfo.name),e.$toast.info({title:"".concat(s)})}}),this.panelClose("addToGroupOpen")},openIAA:function(){var t=this;this.panelOpen("iaaReportOpen"),Object(r["bb"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,"query").then(function(e){var a=e.body.check_item;a?(t.chkIAAData=[],t.isFound=!0,1==a.addr&&t.chkIAAData.push("address"),1==a.email&&t.chkIAAData.push("email"),1==a.mobile1&&t.chkIAAData.push("mobile1"),1==a.mobile2&&t.chkIAAData.push("mobile2"),1==a.tel&&t.chkIAAData.push("phone")):(t.isFound=!1,t.chkIAAData=[])})},initCustomerDetail1:function(){var t=this,e=this.$route.params.id;"origin"===e||("SerNo"!==e?this.updateCustID(localStorage[e]):this.updateSerNo(localStorage[e])),this.loading_1=!0,Object(r["m"])(this.$store.state.userInfo.id,this.$store.state.userInfo.id,this.$store.state.custInfo.ID||this.$store.state.custInfo.serNo).then(function(e){e.header&&"200"===e.header.status?(t.setCustInfo(e.body.customer),t.setCustPersonalInfo(e.body.customer),t.setCustFinancial(e.body.financial),t.setCustDecline(e.body.refuse_mark,e.body.customer),t.setCustServiceItem(e.body.service_check),t.loading_1=!1):(t.loading_1=!1,t.$toast.info({title:e.header.message}))}),Object(r["l"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID,"queryAPI").then(function(e){if(t.loading_2=!0,e.header&&"200"===e.header.status){if(t.setCustIaa(e.body),e.body.check_item&&e.body.check_item.upd_time){var a=e.body.check_item.upd_time;if(e.body.detail){var s=e.body.detail.addr_newest_update,i=e.body.detail.email_update,n=e.body.detail.mobile01_update,o=(e.body.detail.mobile02_update,e.body.detail.tel_newest_update);t.isReported=!(s>a||i>a||n>a||n>a||o>a)}else t.isReported=!0}t.loading_2=!1}else t.$toast.info({title:e.header.message}),t.loading_2=!1}),Object(r["G"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID).then(function(e){e.body.groups?t.grpsOfCust=e.body.groups.map(function(t){return{grp_id:t.grp_id,grp_name:t.grp_name}}):t.grpsOfCust=[]}),Object(r["E"])(this.$store.state.userInfo.id,this.$store.state.userInfo.id).then(function(e){var a=[];e.body&&e.body.groups?(e.body.groups.forEach(function(t){var e={grp_id:t.grp_id,grp_name:t.grp_name,edit:!1};a.push(e)}),t.grpsOfAgnt=a):t.grpsOfAgnt=a}),Object(r["ab"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID).then(function(e){e&&e.body&&e.body.length>0?t.$store.dispatch("updaHousingLoans",!0):t.$store.dispatch("updaHousingLoans",!1)}),Object(r["k"])(this.$store.state.userInfo.id,this.$store.state.custInfo.ID).then(function(e){e.header&&"200"===e.header.status?t.custDie=!0:t.custDie=!1})},routeToCustDetail:function(t){var e="";e=-1===this.$route.params.id.indexOf("intr")?"intr1":"intr"+(this.$route.params.id.replace("intr","")-0+1),localStorage[e]=t,this.updateCustID(t),this.$router.push({path:"/detail/".concat(e,"/tab/1")})},getFax:function(t){return"undefined"!==t?t[0]&&t[1]?t[0]+"-"+t[1]:"".concat(t[0]).concat(t[1]):""}}),beforeMount:function(){var t=this.$route.name.split(/-/g).reverse();this.currentTab=Number(t[0]),this.serviceItems=[this.serviceCHANGEONLINE,this.serviceESERVER,this.servicePAYMENT_APPLY,this.serviceCSEMAIL,this.servicePLCNOS,this.serviceSHOW_ECALL,this.servicePL_LOAN,this.serviceCLAIM_OFFSET_BILL]},mounted:function(){this.initCustomerDetail1()}},ot=nt,lt=Object(_["a"])(ot,s,i,!1,null,null,null);lt.options.__file="CustomerDetail1.vue";e["default"]=lt.exports},"2f21":function(t,e,a){"use strict";var s=a("79e5");t.exports=function(t,e){return!!t&&s(function(){e?t.call(null,function(){},1):t.call(null)})}},"32ea":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal fade",class:{"is-open":t.open}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-body"},[a("section",{staticClass:"search"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10 offset-1"},[a("p",{staticClass:"text-center"},[t._v("請以關鍵字搜尋客戶後選擇其中一位：")]),a("form",{staticClass:"form"},[a("div",{staticClass:"input-group input-lg"},[a("div",{staticClass:"input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{type:"text",name:"keyword",id:"keyword",placeholder:"輸入客戶姓名進行搜尋"},domProps:{value:t.keyword},on:{input:function(e){e.target.composing||(t.keyword=e.target.value)}}})]),a("button",{staticClass:"btn btn-primary btn-icon",attrs:{type:"submit"},on:{click:function(e){e.stopPropagation(),e.preventDefault(),t.findClient()}}},[a("i",{staticClass:"icon-search i-24"})])])])])])]),a("section",{staticClass:"maintain mt-5"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-10 offset-1"},[a("div",{staticClass:"row"},[t._l(t.clientList,function(e,s){return a("div",{key:"search-client-"+s,staticClass:"col-6"},[a("div",{staticClass:"radio"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selection,expression:"selection"}],attrs:{type:"radio",name:"selection",id:"selection-"+s},domProps:{value:e,checked:t._q(t.selection,e)},on:{change:function(a){t.selection=e}}}),a("label",{staticClass:"scrollData",attrs:{for:"selection-"+s}},[t._v("\n                      "+t._s(e.name.length>17?e.name.substr(0,16)+". . . ":e.name)+"("+t._s(t._f("ageCounter")(e.birthday))+"歲)\n                    ")])])])}),t.clientLoading?a("div",{staticClass:"col-12 text-center",class:{"section-loading":!0}},[a("h1",{staticClass:"m-5"},[t._v("Loading")])]):t._e()],2)])])]),a("section",{staticClass:"action text-right"},[a("a",{staticClass:"btn btn-default",on:{click:function(e){t.$emit("close")}}},[t._v("\n            取消\n          ")]),a("a",{staticClass:"btn btn-primary",on:{click:t.doSubmit}},[t._v("\n            確認\n          ")])])])])])])},i=[],n=(a("7f7f"),a("8e44")),o={name:"SearchClientModal",props:{open:{type:Boolean,default:!1}},data:function(){return{clientLoading:!1,error:!1,keyword:"",list:[],selection:null,clientList:[]}},watch:{keyword:"initList"},methods:{initList:function(){this.list=[]},findClient:function(){this.queryCustList(),""===this.keyword&&this.initList()},doSubmit:function(){console.log(this.selection),this.$emit("submit",this.selection)},queryCustList:function(){var t=this;this.clientLoading=!0,this.clientList=[],Object(n["A"])(this.$store.state.userInfo.id,this.keyword).then(function(e){e.body?t.clientList=e.body.customer_list.map(function(t){return{name:t.name||"",birthday:t.birthday||"",id:t.id}}):t.clientList=[],t.clientLoading=!1})}}},l=o,r=(a("bb15"),a("2877")),c=Object(r["a"])(l,s,i,!1,null,"6c76cef7",null);c.options.__file="SearchClientModal.vue";e["a"]=c.exports},"3e59":function(t,e,a){"use strict";var s=a("4e7f"),i=a.n(s);i.a},"4e7f":function(t,e,a){},5118:function(t,e,a){(function(t){var s="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(i.call(setTimeout,s,arguments),clearTimeout)},e.setInterval=function(){return new n(i.call(setInterval,s,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(s,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},"55dd":function(t,e,a){"use strict";var s=a("5ca1"),i=a("d8e8"),n=a("4bf8"),o=a("79e5"),l=[].sort,r=[1,2,3];s(s.P+s.F*(o(function(){r.sort(void 0)})||!o(function(){r.sort(null)})||!a("2f21")(l)),"Array",{sort:function(t){return void 0===t?l.call(n(this)):l.call(n(this),i(t))}})},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var s,i=1,n={},o=!1,l=t.document,r=Object.getPrototypeOf&&Object.getPrototypeOf(t);r=r&&r.setTimeout?r:t,"[object process]"==={}.toString.call(t.process)?v():f()?p():t.MessageChannel?h():l&&"onreadystatechange"in l.createElement("script")?_():C(),r.setImmediate=c,r.clearImmediate=u}function c(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var o={callback:t,args:e};return n[i]=o,s(i),i++}function u(t){delete n[t]}function d(t){var e=t.callback,s=t.args;switch(s.length){case 0:e();break;case 1:e(s[0]);break;case 2:e(s[0],s[1]);break;case 3:e(s[0],s[1],s[2]);break;default:e.apply(a,s);break}}function m(t){if(o)setTimeout(m,0,t);else{var e=n[t];if(e){o=!0;try{d(e)}finally{u(t),o=!1}}}}function v(){s=function(t){e.nextTick(function(){m(t)})}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function p(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&m(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),s=function(a){t.postMessage(e+a,"*")}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},s=function(e){t.port2.postMessage(e)}}function _(){var t=l.documentElement;s=function(e){var a=l.createElement("script");a.onreadystatechange=function(){m(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function C(){s=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("4362"))},bb15:function(t,e,a){"use strict";var s=a("ff00"),i=a.n(s);i.a},ff00:function(t,e,a){}}]);
//# sourceMappingURL=chunk-f54c6388.af3da58c.js.map